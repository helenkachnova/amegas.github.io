/*
    Gera, WebGL 3D library, version 0.0.3-pre
    JSC Amegas.sys, copyright 2014-2015 (c)
    Developer: Oleg Orlov A
    E-mail: oleg@amegas.ru

    Official project website:
    http://magesi.ru/gera

    Official project mirrors:
    https://gera.codeplex.com
    https://github.com/amegas/gera

    Despite on fact, that this product is open-source one,
    it doesn't belong to GNU GPL or Apache types of license,
    it has own specific license, which regulates terms of use.	
    http://magesi.ru/gera/license
*/
!function(e,t){"use strict";if("object"!=typeof e||!(e instanceof Window))throw new Error("You're trying to apply a new library instance NOT to the global object `Window`.");if("string"!=typeof t)throw new Error("Can't initialize a name of the new library instance with type, distinct from `string`.");if("string"==typeof t&&0===t.length)throw new Error("Can't initialize a name of the new library, because input library name argument is an empty string.");var r=e[t]={};r.version="0.0.3-pre",function(e){e.Global={checkElementExistenceInArray:function(e,t){if(!(e instanceof Array))throw new Error("Can't screen the input collection, because it's NOT an instance of `Array`.");if(void 0===t)throw new Error("Can't handle the required element, because it's undefined.");if(0===e.length)throw new Error("Input screening collection is an instance of `Array`, but it's content length equals zero.");return-1===e.indexOf(t)?!1:!0},checkElementsExistenceInArray:function(e,t){if(!(e instanceof Array))throw new Error("Can't screen the input collection, because it's NOT an instance of `Array`.");if(!(t instanceof Array))throw new Error("Can't handle the required elements, because they are NOT compiled into `Array` object.");if(0===e.length)throw new Error("Input screening collection is an instance of `Array`, but it's content length equals zero.");if(0===t.length)throw new Error("Input required elements collection is an instance of `Array`, but it's content length equals zero.");for(var r in t)if(-1===e.indexOf(t[r]))return!1;return!0},checkPropertyExistence:function(e,t){if("object"!=typeof e)throw new Error("Can't check the property existence in object, because the input object is NOT a type of `object`.");if("string"!=typeof t)throw new Error("Can't check the property existence in object, because the input property name is NOT a type of `string`.");return e.hasOwnProperty(t)},convertObjectPropertiesToArray:function(e){if("object"!=typeof e)throw new Error("Can't convert the properties of input object to array, because the input object is NOT a type of `object`.");var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},getPropertyNameByValue:function(e,t){if("object"!=typeof e)throw new Error("Can't handle input object, because it's NOT type of `object`.");if(void 0===t)throw new Error("Can't handle input object with the undefined value.");for(var r in e)if(e[r]===t)return r},objectsEqual:function(e,t){return e===t?!0:!1}}}(r),function(e){e.Guid=function(){this.parts=r(),this.sequence=this.convertToString()},e.Guid.prototype.convertToString=function(){if(!(this.parts instanceof Array))throw new Error("Can't convert the GUID object to the `string` value, because the parts object is NOT an instanceof of `Array`.");return this.parts.toString().replace(/,/g,"-")};var t=5,r=function(){for(var e=new Array(t),r=0;r<e.length;r++)switch(r){case 0:e[r]=String.prototype.concat(n(),n());break;case 1:case 2:case 3:e[r]=n();break;case 4:e[r]=String.prototype.concat(n(),n(),n());break;default:throw new Error(String.prototype.concat("Can't generate the subitem for the new GUID-object, because a single GUID object may contain only the ",t," subitems maximum."))}return e},n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}(r),function(e){e.Promise=function(e){this.resolved=!1,this.wrappedObject=e,this.then=t.bind(this),this.run=r.bind(this),this.resolve=o.bind(this)},e.Promise.create=function(t){return"function"==typeof t&&t.hasOwnProperty("promise")?t.promise:new e.Promise},e.Promise.executeAsynchronously=function(e){if("function"!=typeof e)throw new Error("Can't execute the given callback function asynchronously, because the given callback function object is NOT a type of `function`.");window.setTimeout(e,0)};var t=function(t){if("boolean"!=typeof this.resolved)throw new Error("Can't handle a thenable object, because the binded property `resolved` is NOT a type of `boolean`.");return this.resolved?void n.call(this,t):(this.next=new e.Promise(t),this.next)},r=function(t){var r=this;e.Promise.executeAsynchronously(function(){r.wrappedObject.call(r,t)})},n=function(t){this.next instanceof e.Promise&&r.call(this.next,t)},o=function(e){if("boolean"!=typeof this.resolved)throw new Error("Can't resolve the promise, because the binded property `resolved` is NOT a type of `boolean`.");this.resolved=!0,t.call(this,e)}}(r),function(e){e.Ajax=function(){throw new Error("You're trying to create an instance of abstract `Gera.Ajax` prototype.")},e.Ajax.HttpMethod={Get:0,Post:1,Put:2,Delete:3,Copy:4,Patch:5,Options:6,Head:7,Purge:8,Link:9,Unlink:10},e.Ajax.HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,SwitchProxy:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,RequestEntityTooLarge:413,RequestUriTooLong:414,UnsupportedMediaType:415,RequestedRangeNotSatisfiable:416,ExpectationFailed:417,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511},e.Ajax.ReadyState={Unsent:0,Opened:1,HeadersReceived:2,Loading:3,Done:4},e.Ajax.ResponseType={Text:0,ArrayBuffer:1,Blob:2,Document:3,Json:4},e.Ajax.Request=function(){if(0===arguments.length)throw new Error("Can't create a new `Gera.Ajax.Request` object, because there are NO input arguments for creating it.");if("object"!=typeof arguments[0])throw new Error("Can't create a new `Gera.Ajax.Request` object, because the input arguments object is NOT a type of `object`.");var e=t(arguments[0]);for(var r in e)this[r]=e[r];o(this),a(this)},e.Ajax.AuthenticationData=function(e,t){if(!e&&"string"==typeof t)throw new Error("Can't create a new `Gera.Ajax.AuthenticationData` object, because the occurred situation can't be real. The given login is `undefined/null`, but password is a type of `string`. The login may be set with empty password, but not vice versa.");this.login="string"==typeof e?e:null,this.password="string"==typeof t?t:null},e.Ajax.sendRequest=function(t){var r=new e.Promise;return i(t).then(function(e){r.resolve(e)}),r};var t=function(e){if(e.login&&"string"!=typeof e.login)throw new Error("Can't prepare the HTTP request object, because the optional property `login` is NOT a type of `string`.");if(e.password&&"string"!=typeof e.password)throw new Error("Can't prepare the HTTP request object, because the optional property `password` is NOT a type of `string`.");var t={};return r(t,e),n(t,e),t},r=function(t,r){if("object"!=typeof t)throw new Error("Can't handle the required HTTP-request options, because the input `httpObjectProperties` argument is NOT type of `object`.");if("object"!=typeof r)throw new Error("Can't handle the required HTTP-request options, because the input `options` argument is NOT type of `object`.");if(!e.Global.checkElementsExistenceInArray(Object.keys(r),["method","endpoint","asynchronous"]))throw new Error("Can't prepare the HTTP request object, because the required properties for creating it weren't provided. Required properties are the next: [ method, endpoint, asynchronous ]. Optional properties are: [ login, password ].");if("number"!=typeof r.method)throw new Error("Can't prepare the HTTP request object, because the required property `method` is NOT a type of `number`. The number type is required, because the enumeration `Gera.Ajax.HttpMethod` holds number values, which will be associated with the correct HTTP-method later.");if("string"!=typeof r.endpoint)throw new Error("Can't prepare the HTTP request object, because the required property `endpoint` is NOT a type of `string`.");if("boolean"!=typeof r.asynchronous)throw new Error("Can't prepare the HTTP request object, because the required property `asynchronous` is NOT a type of `boolean`.");t.httpMethod=r.method,t.urlEndpoint=r.endpoint,t.asynchronous=r.asynchronous},n=function(t,r){if("object"!=typeof t)throw new Error("Can't handle the optional HTTP-request options, because the input `httpObjectProperties` argument is NOT type of `object`.");if("object"!=typeof r)throw new Error("Can't handle the optional HTTP-request options, because the input `options` argument is NOT type of `object`.");if(r.hasOwnProperty("responseType")){if("number"!=typeof r.responseType)throw new Error("Can't prepare the HTTP request object, because the optional property `responseType` is NOT a type of `number`.");t.responseType=r.responseType}if(r.hasOwnProperty("login")&&"string"!=typeof r.login)throw new Error("Can't prepare the HTTP request object, because the optional property `login` is NOT a type of `string`.");if(r.hasOwnProperty("password")&&"string"!=typeof r.password)throw new Error("Can't prepare the HTTP request object, because the optional property `password` is NOT a type of `string`.");t.authentication=r.login||r.password?new e.Ajax.AuthenticationData(r.login,r.password):null},o=function(t){if(!(t instanceof e.Ajax.Request))throw new Error("Can't set the HTTP-method string value for the request object, because the input request object is NOT an instance of `Gera.Ajax.Request`.");if("number"!=typeof t.httpMethod)throw new Error("Can't set the HTTP-method string value for the request object, because the request object property `httpMethod` is NOT a type of `number`.");switch(t.httpMethod){case 0:t.httpMethodString="GET";break;case 1:t.httpMethodString="POST";break;case 2:t.httpMethodString="PUT";break;case 3:t.httpMethodString="DELETE";break;case 4:t.httpMethodString="COPY";break;case 5:t.httpMethodString="PATCH";break;case 6:t.httpMethodString="OPTIONS";break;case 7:t.httpMethodString="HEAD";break;case 8:t.httpMethodString="PURGE";break;case 9:t.httpMethodString="LINK";break;case 10:t.httpMethodString="UNLINK";break;default:throw new Error("Can't set the HTTP-method string value for the request object, because the request object property `httpMethod` value doesn't exist in `Gera.Ajax.HttpMethod` enumeration collection.")}},a=function(t){if(!(t instanceof e.Ajax.Request))throw new Error("Can't prepare the `XMLHttpRequest` object, because the input `httpRequest` argument is NOT an instance of `Gera.Ajax.Request`.");switch(t.responseType){case 0:t.responseTypeString="text";break;case 1:t.responseTypeString="arraybuffer";break;case 2:t.responseTypeString="blob";break;case 3:t.responseTypeString="document";break;case 4:t.responseTypeString="json";break;default:throw new Error("Can't set the HTTP-response type string value for the request object, because the request object property `responseType` value doesn't exist in `Gera.Ajax.ResponseType` enumeration collection.")}},i=function(t){if(!(t instanceof e.Ajax.Request))throw new Error("Can't prepare the `XMLHttpRequest` object, because the input `httpRequest` argument is NOT an instance of `Gera.Ajax.Request`.");var r=new XMLHttpRequest;return r.promise=new e.Promise,r.open(t.httpMethodString,t.urlEndpoint,t.asynchronous,t.authentication?t.authentication.login:null,t.authentication?t.authentication.password:null),r.responseType="json"===t.responseTypeString&&h()?"text":t.responseTypeString,r.managedResponseType=t.responseType,s(r),t.messageContent?r.send(t.messageContent):r.send(),r.promise},s=function(e){if(!(e instanceof XMLHttpRequest))throw new Error("Can't handle the XML HTTP-request events, because the input object is NOT an instance of `XMLHttpRequest`.");e.onreadystatechange=c},c=function(t){if(!(t instanceof Event))throw new Error("Can't handle `onReadyStateChange` event, because the input event is NOT an instance of `Event`.");var r=t.target||t.currentTarget||t.srcElement;if(!(r instanceof XMLHttpRequest))throw new Error("Can't handle `onReadyStateChange event, because the XML HTTP-request object, which was taken from event object is NOT an instance of `XMLHttpRequest`.");if(r.readyState===e.Ajax.ReadyState.Done&&r.status===e.Ajax.HttpStatusCode.Ok){if(r.managedResponseType===e.Ajax.ResponseType.Json&&h())return void r.promise.resolve(u(r.response));r.promise.resolve(r.response)}},h=function(){return-1!==window.navigator.userAgent.toLowerCase().indexOf("trident")?!0:!1},u=function(e){if("string"==typeof e){if("object"!=typeof JSON)throw new Error("Can't prepare the JSON response for Trident browser engine, because it seems to be, that your browser doesn't support the JSON object ( window.JSON ) from browser JavaScript API, which is required for parsing the text data.");var t=JSON.parse(e);if("object"!=typeof t)throw new Error("Can't prepare the JSON response for Trident browser engine, because the parsed JSON object is NOT a type of `object`.");return t}throw new Error("Can't prepare the JSON response for Trident browser engine, because the given content object is NOT a type of `string`. This type of error may occur, when you're trying to set the `responseType` property of the `XMLHttpRequest` object incorrectly using the Internet Explorer browser.")}}(r),function(e){e.Bounds=function(){throw new Error("You're trying to create an instance of abstract `Gera.Bounds` prototype.")},e.Bounds.Type={Frustum:0,Perspective:1,Orthographic:2},e.Bounds.Perspective=function(){if(0===arguments.length)throw new Error("You didn't provide any arguments for `Gera.Bounds.Perspective` constructor.");var r=Object.keys(arguments[0]).length;if(4!==r)throw new Error(String.prototype.concat("There must be 4 properties in argument body for `Gera.Bounds.Perspective` constructor. You've provided: ",r," properties in it."));for(var n in arguments[0]){var o=t(n,arguments[0][n],e.Bounds.Type.Perspective);if(!o)throw new Error("The bounds settings validation result is `false`, so can't bind any settings as the properties of object.");this[n]=arguments[0][n]}},e.Bounds.Orthographic=function(){if(0===arguments.length)throw new Error("You didn't provide any arguments for `Gera.Bounds.Orthographic` constructor.");var r=Object.keys(arguments[0]).length;if(6!==r)throw new Error(String.prototype.concat("There must be 6 properties in argument body for `Gera.Bounds.Orthographic` constructor. You've provided: ",r," properties in it."));for(var n in arguments[0]){var o=t(n,arguments[0][n],e.Bounds.Type.Orthographic);if(!o)throw new Error("The bounds settings validation result is `false`, so can't bind any settings as the properties of object.");this[n]=arguments[0][n]}};var t=function(t,r,n){if(void 0===n)throw new Error("Can't check the input argument, because vector type is undefined for the check.");switch(n){case e.Bounds.Type.Perspective:if(-1===["fieldOfView","aspect","near","far"].indexOf(t))throw new Error("The input argument name is not valid for `Gera.Bounds.Perspective` object. Possible property names are: [ fieldOfView, aspect, near, far ].");return!0;case e.Bounds.Type.Orthographic:if(-1===["left","right","top","bottom","near","far"].indexOf(t))throw new Error("The input argument name is not valid for `Gera.Bounds.Orthographic` object. Possible property names are: [ left, right, top, bottom, near, far ].");return!0;case e.Bounds.Type.Frustum:break;default:throw new Error("Can't validate the bounds settings, because the given bounds type is NOT associated with any one type, existed in the `Gera.Bounds.Type` enumeration.")}if("number"!=typeof r)throw new Error(String.prototype.concat("Input argument property `",t,"` is not a type of `number`."))}}(r),function(e){e.Vector=function(){throw new Error("You're trying to create an instance of abstract `Gera.Vector` prototype.")},e.Vector.Type={Double:0,Triple:1,Quadro:2},e.Vector2=function(){if(0===arguments.length)this.x=0,this.y=0;else{t(arguments);var n=Object.keys(arguments[0]).length;if(2!==n)throw new Error(String.prototype.concat("`Gera.Vector2` constructor accepts only 2 properties in argument object, they are: [ x, y ]. You have provided: ",n," arguments."));for(var o in arguments[0])r(o,arguments[0][o],e.Vector.Type.Double),this[o]=arguments[0][o]}},e.Vector2.prototype.length=function(){return e.Math.calculateTwoDimensionalVectorLength(this)},e.Vector2.prototype.normalize=function(){var t=e.Math.normalizeTwoDimensionalVector(this);if(!(t instanceof e.Vector2))throw new Error("The vector object can't normalize itself, because the result object from `Gera.Math.normalizeTwoDimensionalVector( vector )` method is NOT an instance of `Gera.Vector2`.");this.x=t.x,this.y=t.y},e.Vector2.prototype.scale=function(t){var r=e.Math.scaleTwoDimensionalVector(this,t);if(!r)throw new Error("The vector object can't be scaled, because the result object from `Gera.Math.scaleTwoDimensionalVector( vector, scalar )` method is NOT an instance of `Gera.Vector2`.");this.x=r.x,this.y=r.y},e.Vector3=function(){if(0===arguments.length)this.x=0,this.y=0,this.z=0;else{t(arguments);var n=Object.keys(arguments[0]).length;if(3!==n)throw new Error(String.prototype.concat("`Gera.Vector3` constructor accepts only 3 properties in argument object, they are: [ x, y, z ]. You have provided: ",n," arguments."));for(var o in arguments[0])r(o,arguments[0][o],e.Vector.Type.Triple),this[o]=arguments[0][o]}},e.Vector3.prototype.length=function(){return e.Math.calculateThreeDimensionalVectorLength(this)},e.Vector3.prototype.normalize=function(){var t=e.Math.normalizeThreeDimensionalVector(this);if(!(t instanceof e.Vector3))throw new Error("The vector object can't normalize itself, because the result object from `Gera.Math.normalizeThreeDimensionalVector( vector )` method is NOT an instance of `Gera.Vector3`.");this.x=t.x,this.y=t.y,this.z=t.z},e.Vector3.prototype.scale=function(t){var r=e.Math.scaleThreeDimensionalVector(this,t);if(!r)throw new Error("The vector object can't be scaled, because the result object from `Gera.Math.scaleThreeDimensionalVector( vector, scalar )` method is NOT an instance of `Gera.Vector3`.");this.x=r.x,this.y=r.y,this.z=r.z},e.Vector4=function(){if(0===arguments.length)this.x=0,this.y=0,this.z=0,this.i=0;else{t(arguments);var n=Object.keys(arguments[0]).length;if(4!==n)throw new Error(String.prototype.concat("`Gera.Vector4` constructor accepts only 4 properties in argument object, they are: [ x, y, z, i ]. You have provided: ",n," arguments."));for(var o in arguments[0])r(o,arguments[0][o],e.Vector.Type.Quadro),this[o]=arguments[0][o]}},e.Vector4.prototype.length=function(){return e.Math.calculateFourDimensionalVectorLength(this)},e.Vector4.prototype.normalize=function(){var t=e.Math.normalizeFourDimensionalVector(this);if(!(t instanceof e.Vector4))throw new Error("The vector object can't normalize itself, because the result object from `Gera.Math.normalizeFourDimensionalVector( vector )` method is NOT an instance of `Gera.Vector4`.");this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},e.Vector4.prototype.scale=function(t){var r=e.Math.scaleFourDimensionalVector(this,t);if(!r)throw new Error("The vector object can't be scaled, because the result object from `Gera.Math.scaleFourDimensionalVector( vector, scalar )` method is NOT an instance of `Gera.Vector4`.");this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w};var t=function(e){if(1!==e.length)throw new Error("There could be only the one input argument for the vector constructor.");if("object"!=typeof e[0])throw new Error("Input argument is NOT a type of `object`.")},r=function(t,r,n){if(void 0===n)throw new Error("Can't check the input argument, because vector type is undefined for the check.");switch(n){case e.Vector.Type.Double:if(-1===["x","y"].indexOf(t))throw new Error("The input argument name is NOT valid for `Gera.Vector2` object. Possible property names are: [ x, y ].");return!0;case e.Vector.Type.Triple:if(-1===["x","y","z"].indexOf(t))throw new Error("The input argument name is NOT valid for `Gera.Vector3` object. Possible property names are: [ x, y, z ].");return!0;case e.Vector.Type.Quadro:if(-1===["x","y","z","i"].indexOf(t))throw new Error("The input argument name is NOT valid for `Gera.Vector4` object. Possible property names are: [ x, y, z, i ].");return!0;default:throw new Error("Can't validate the coordinates from the input arguments, because the given vector type is incorrect. Possible vector type value could be the next: [ Gera.Vector.Type.Double, Gera.Vector.Type.Triple, Gera.Vector.Type.Quadro ].")}if("number"!=typeof r)throw new Error(String.prototype.concat("Input argument property `",t,"` is NOT a type of `number`."))}}(r),function(e){e.Rotation=function(){var e=t(arguments[0]);for(var r in e)this[r]=e[r]};var t=function(t){if("object"!=typeof t)throw new Error("Can't create a new `Gera.Rotation` object, because the given arguments object is NOT a type of `object`.");var r=e.Global.checkElementsExistenceInArray;if(!r(Object.keys(t),["vector","angle"]))throw new Error("Can't create a new `Gera.Rotation` object, because the input arguments object doesn't have the required properties: [ vector, angle ].");var n=t.vector,o=t.angle;if("number"!=typeof o)throw new Error("Can't create a new `Gera.Rotation` object, because the given angle value is NOT a type of `number`.");if(0>o||o>360)throw new Error("Can't create a new `Gera.Rotation` object, because the given angle value has an incorrect value. The value must be NOT less than 0 and NOT greater than 360.");if(!(n instanceof e.Vector3))throw new Error("Can't create a new `Gera.Rotation` object, because the given vector object is NOT an instance of `Gera.Vector3`.");for(var a in n)if("number"==typeof n[a]&&-1===[-1,0,1].indexOf(n[a]))throw new Error("Can't create a new `Gera.Rotation` object, because one of values from the vector object is incorrect. Rotation vector may accept only the following values [ -1, 0, 1 ], because such values define the direction of the rotation.");return{vector:n,angle:o}}}(r),function(e){e.Quaternion=function(){t.call(this,arguments[0])},e.Quaternion.prototype.toMatrix=function(){return e.Math.convertQuaternionToMatrix(this)},e.Quaternion.prototype.multiplyByQuaternion=function(t){if(!(t instanceof e.Quaternion))throw new Error("Can't use the given quaternion object for multiplication, because it's NOT an instance of `Gera.Quaternion`.");var r=e.Math.multiplyQuaternions(this,t);if(!(r instanceof e.Quaternion))throw new Error("The quaternion object can't multiply itself with the given quaternion, because the result object from `Gera.Math.multiplyQuaternions( firstQuaternion, secondQuaternion )` method is NOT an instance of `Gera.Quaternion`.");1!==r.length()&&r.normalize(),this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w},e.Quaternion.prototype.length=function(){return e.Math.calculateQuaternionLength(this)},e.Quaternion.prototype.normalize=function(){var t=e.Math.normalizeQuaternion(this);if(!(t instanceof e.Quaternion))throw new Error("The quaternion object can't normalize itself, because the result object from `Gera.Math.normalizeQuaternion( quaternion )` method is NOT an instance of `Gera.Quaternion`.");this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w};var t=function(e){"object"!=typeof e?r.call(this):n.call(this,e)},r=function(){var e=["x","y","z","w"];for(var t in e)switch(e[t]){case"x":case"y":case"z":this[e[t]]=0;break;case"w":this[e[t]]=1;break;default:throw new Error("Can't set the properties for the new empty quaternion object, because one of them has the incorrect name. Valid property names are: [ x, y, z, w ].")}},n=function(t){if("object"!=typeof t)throw new Error("Can't set properties for the new `Gera.Quaternion` object, because the given settings object is NOT a type of `object`.");if(4!==Object.keys(t).length)throw new Error("Can't set properties for the new `Gera.Quaternion` object, because the count of the properties from the given settings object isn't equal 4.");var r=e.Global.checkElementsExistenceInArray;if(!r(Object.keys(t),["x","y","z","w"]))throw new Error("Can't set properties for the new `Gera.Quaternion` object, because the given settings object has the incorrect values. The correct values are: [ x, y, z, w ].");if("number"!=typeof t.x)throw new Error("Can't set properties for the new `Gera.Quaternion` object, because the property `x` from the input arguments is NOT a type of `number`.");if("number"!=typeof t.y)throw new Error("Can't set properties for the new `Gera.Quaternion` object, because the property `y` from the input arguments is NOT a type of `number`.");if("number"!=typeof t.z)throw new Error("Can't set properties for the new `Gera.Quaternion` object, because the property `z` from the input arguments is NOT a type of `number`.");if("number"!=typeof t.w)throw new Error("Can't set properties for the new `Gera.Quaternion` object, because the property `w` from the input arguments is NOT a type of `number`.");this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w}}(r),function(e){e.Math=function(){throw new Error("You're trying to create an instance of abstract `Gera.Math` prototype.")},e.Math.convertDegreesToRadians=function(e){if("number"!=typeof e)throw new Error("Can't convert degrees to radians, because the input value is NOT a type of `number`.");return e*Math.PI/180},e.Math.createPerspectiveProjection=function(t){if(!(t instanceof e.Bounds.Perspective))throw new Error("Can't create the perspective projection on given bounds, because it's NOT an instance of `Gera.Bounds.Perspective`.");var r=t.near*Math.tan(t.fieldOfView*Math.PI/360),n=r*t.aspect;return e.Matrix.Frustum(new e.Bounds.Orthographic({left:-n,right:n,top:r,bottom:-r,near:t.near,far:t.far}))},e.Math.createOrthographicProjection=function(t){if(!(t instanceof e.Bounds.Orthographic))throw new Error("Can't create the orthographic projection on given bounds, because it's NOT an instance of `Gera.Bounds.Orthographic`.");for(var r=new e.Matrix.Empty,n=t.right-t.left,o=t.top-t.bottom,a=t.far-t.near,i=0;i<r.length;i++)r[i]=2/n,r[i]=0,r[i]=0,r[i]=0,r[i]=0,r[i]=2/o,r[i]=0,r[i]=0,r[i]=0,r[i]=0,r[i]=-2/a,r[i]=0,r[i]=-(left+right)/n,r[i]=-(top+bottom)/o,r[i]=-(far+near)/a,r[i]=1;return r},e.Math.translateMatrixByVector=function(t,r){if(!(t instanceof Float32Array))throw new Error("Can't translate the input matrix by the input vector, because the input matrix is not an instance of `Float32Array`.");if(!(r instanceof e.Vector3))throw new Error("Can't translate the input matrix by the input vector, because the input vector is not an instance of `Gera.Vector3`.");return t[12]=t[0]*r.x+t[4]*r.y+t[8]*r.z+t[12],t[13]=t[1]*r.x+t[5]*r.y+t[9]*r.z+t[13],t[14]=t[2]*r.x+t[6]*r.y+t[10]*r.z+t[14],t[15]=t[3]*r.x+t[7]*r.y+t[11]*r.z+t[15],t},e.Math.multiplyMatrices=function(t,r){if(!(t instanceof Float32Array))throw new Error("Can't multiply the two matrices between each other, because the first matrix is NOT an instance of `Float32Array`.");if(!(r instanceof Float32Array))throw new Error("Can't multiply the two matrices between each other, because the second matrix is NOT an instance of `Float32Array`.");var n=new e.Matrix.Empty;return n[0]=t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12]*r[3],n[1]=t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13]*r[3],n[2]=t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14]*r[3],n[3]=t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15]*r[3],n[4]=t[0]*r[4]+t[4]*r[5]+t[8]*r[6]+t[12]*r[7],n[5]=t[1]*r[4]+t[5]*r[5]+t[9]*r[6]+t[13]*r[7],n[6]=t[2]*r[4]+t[6]*r[5]+t[10]*r[6]+t[14]*r[7],n[7]=t[3]*r[4]+t[7]*r[5]+t[11]*r[6]+t[15]*r[7],n[8]=t[0]*r[8]+t[4]*r[9]+t[8]*r[10]+t[12]*r[11],n[9]=t[1]*r[8]+t[5]*r[9]+t[9]*r[10]+t[13]*r[11],n[10]=t[2]*r[8]+t[6]*r[9]+t[10]*r[10]+t[14]*r[11],n[11]=t[3]*r[8]+t[7]*r[9]+t[11]*r[10]+t[15]*r[11],n[12]=t[0]*r[12]+t[4]*r[13]+t[8]*r[14]+t[12]*r[15],n[13]=t[1]*r[12]+t[5]*r[13]+t[9]*r[14]+t[13]*r[15],n[14]=t[2]*r[12]+t[6]*r[13]+t[10]*r[14]+t[14]*r[15],n[15]=t[3]*r[12]+t[7]*r[13]+t[11]*r[14]+t[15]*r[15],n},e.Math.inverseThreeDimensionalMatrixFromFour=function(t){if(!(t instanceof Float32Array))throw new Error("Can't inverse the three-dimensional matrix, because the given matrix object is NOT an instance of `Float32Array`.");var r=t[10]*t[5]-t[6]*t[9],n=-t[10]*t[4]+t[6]*t[8],o=t[9]*t[4]-t[5]*t[8],a=t[0]*r+t[1]*n+t[2]*o,i=1/a,s=new e.Matrix3;return s[0]=r*i,s[1]=(-t[10]*t[1]+t[2]*t[9])*i,s[2]=(t[6]*t[1]-t[2]*t[5])*i,s[3]=n*i,s[4]=(t[10]*t[0]-t[2]*t[8])*i,s[5]=(-t[6]*t[0]+t[2]*t[4])*i,s[6]=o*i,s[7]=(-t[9]*t[0]+t[1]*t[8])*i,s[8]=(t[5]*t[0]-t[1]*t[4])*i,s},e.Math.transposeThreeDimensionalMatrix=function(e){if(!(e instanceof Float32Array))throw new Error("Can't transpose the three-dimensional matrix, because the given matrix object is NOT an instance of `Float32Array`.");var t=e[1],r=e[2],n=e[5];return e[1]=e[3],e[2]=e[6],e[3]=t,e[5]=e[7],e[6]=r,e[7]=n,e},e.Math.calculateTwoDimensionalVectorLength=function(t){if(!(t instanceof e.Vector2))throw new Error("Can't calculate the length of the given two-dimensional vector, because it's NOT an instance of `Gera.Vector2`.");return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))},e.Math.calculateThreeDimensionalVectorLength=function(t){if(!(t instanceof e.Vector3))throw new Error("Can't calculate the length of the given three-dimensional vector, because it's NOT an instance of `Gera.Vector3`.");return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)+Math.pow(t.z,2))},e.Math.calculateFourDimensionalVectorLength=function(t){if(!(t instanceof e.Vector4))throw new Error("Can't calculate the length of the given four-dimensional vector, because it's NOT an instance of `Gera.Vector4`.");return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)+Math.pow(t.z,2)+Math.pow(t.w,2))},e.Math.normalizeTwoDimensionalVector=function(t){if(!(t instanceof e.Vector2))throw new Error("Can't normalize the given two-dimensional vector, because it's NOT an instance of `Gera.Vector2`.");var r=e.Math.calculateTwoDimensionalVectorLength(t);if("number"!=typeof r)throw new Error("Can't normalize the given two-dimensional vector, because the calculated length value of it is NOT a type of `number`.");if(0===r)return t;var n=1/r;return new e.Vector2({x:t.x*n,y:t.y*n})},e.Math.normalizeThreeDimensionalVector=function(t){if(!(t instanceof e.Vector3))throw new Error("Can't normalize the given three-dimensional vector, because it's NOT an instance of `Gera.Vector3`.");var r=e.Math.calculateThreeDimensionalVectorLength(t);if("number"!=typeof r)throw new Error("Can't normalize the given three-dimensional vector, because the calculated length value of it is NOT a type of `number`.");if(0===r)return t;var n=1/r;return new e.Vector3({x:t.x*n,y:t.y*n,z:t.z*n})},e.Math.normalizeFourDimensionalVector=function(t){if(!(t instanceof e.Vector4))throw new Error("Can't normalize the given four-dimensional vector, because it's NOT an instance of `Gera.Vector4`.");var r=e.Math.calculateFourDimensionalVectorLength(t);if("number"!=typeof r)throw new Error("Can't normalize the given four-dimensional vector, because the calculated length value of it is NOT a type of `number`.");if(0===r)return t;var n=1/r;return new e.Vector4({x:t.x*n,y:t.y*n,z:t.z*n,w:t.w*n})},e.Math.scaleTwoDimensionalVector=function(t,r){if(!(t instanceof e.Vector2))throw new Error("Can't scale the two-dimensional vector by the scalar value, because the given vector object is NOT an instance of `Gera.Vector2`.");if("number"!=typeof r)throw new Error("Can't scale the two-dimensional vector by the scalar value, because the given scalar value is NOT a type of `number`.");var n=new e.Vector2({x:t.x*r,y:t.y*r});return n},e.Math.scaleThreeDimensionalVector=function(t,r){if(!(t instanceof e.Vector3))throw new Error("Can't scale the three-dimensional vector by the scalar value, because the given vector object is NOT an instance of `Gera.Vector3`.");
if("number"!=typeof r)throw new Error("Can't scale the three-dimensional vector by the scalar value, because the given scalar value is NOT a type of `number`.");var n=new e.Vector3({x:t.x*r,y:t.y*r,z:t.z*r});return n},e.Math.scaleFourDimensionalVector=function(t,r){if(!(t instanceof e.Vector4))throw new Error("Can't scale the four-dimensional vector by the scalar value, because the given vector object is NOT an instance of `Gera.Vector4`.");if("number"!=typeof r)throw new Error("Can't scale the four-dimensional vector by the scalar value, because the given scalar value is NOT a type of `number`.");var n=new e.Vector4({x:t.x*r,y:t.y*r,z:t.z*r,w:t.w*r});return n},e.Math.convertQuaternionToMatrix=function(t){if(!(t instanceof e.Quaternion))throw new Error("Can't convert the given quaternion object to its matrix 4x4 representation, because it's NOT an instance of `Gera.Quaternion`.");for(var r=new e.Matrix.Empty,n=0;n<r.length;n++)switch(n){case 0:r[n]=1-(t.y*(t.y+t.y)+t.z*(t.z+t.z));break;case 1:r[n]=t.x*(t.y+t.y)+t.w*(t.z+t.z);break;case 2:r[n]=t.x*(t.z+t.z)-t.w*(t.y+t.y);break;case 4:r[n]=t.x*(t.y+t.y)-t.w*(t.z+t.z);break;case 5:r[n]=1-(t.x*(t.x+t.x)+t.z*(t.z+t.z));break;case 6:r[n]=t.y*(t.z+t.z)+t.w*(t.x+t.x);break;case 8:r[n]=t.x*(t.z+t.z)+t.w*(t.y+t.y);break;case 9:r[n]=t.y*(t.z+t.z)-t.w*(t.x+t.x);break;case 10:r[n]=1-(t.x*(t.x+t.x)+t.y*(t.y+t.y));break;case 3:case 7:case 11:case 12:case 13:case 14:r[n]=0;break;case 15:r[n]=1;break;default:throw new Error("Can't convert the given quaternion object to its matrix 4x4 representation, because it seems to be, that the size of the generated matrix wouldn't be the 4x4.")}return r},e.Math.convertQuaternionToEulerAngles=function(t){if(!(t instanceof e.Quaternion))throw new Error("Can't convert the quaternion object to the Euler angles ( `Gera.Vector3` object ), because the given object is NOT an instance of `Gera.Quaternion`.");var r=new e.Vector3,n={xy:t.x*t.y,xz:t.x*t.z,wx:t.w*t.x,wy:t.w*t.y,wz:t.w*t.z,yz:t.y*t.z},o=Math.sqrt(t.x)+Math.sqrt(t.y);return 0!==o&&1!==o?(r.x=Math.atan2(n.xz+n.wy,n.wx-n.yz),r.y=Math.acos(1-2*o),r.z=Math.atan2(n.xz-n.wy,n.wx+n.yz)):0===o?(result.x=0,result.y=0,result.z=Math.atan2(n.xy-n.wz,.5-Math.sqrt(t.y)-Math.sqrt(t.z))):(result.x=Math.atan2(n.xy-n.wz,.5-Math.sqrt(t.y)-Math.sqrt(t.z)),result.y=Math.PI,result.z=0),r},e.Math.convertRotationToQuaternion=function(t,r){if(!(t instanceof e.Vector3))throw new Error("Can't represent the given rotation settings as the quaternion object, because the given vector is NOT an instance of `Gera.Vector3`.");if("number"!=typeof r)throw new Error("Can't represent the given rotation settings as the quaternion object, because the given angle is NOT a type of `number`.");var n=e.Math.convertDegreesToRadians(r);return new e.Quaternion({x:t.x*Math.sin(n/2),y:t.y*Math.sin(n/2),z:t.z*Math.sin(n/2),w:Math.cos(n/2)})},e.Math.multiplyQuaternions=function(t,r){if(!(t instanceof e.Quaternion))throw new Error("Can't multiply the two quaternions, because the first one is NOT an instance of `Gera.Quaternion`.");if(!(r instanceof e.Quaternion))throw new Error("Can't multiply the two quaternions, because the second one is NOT an instance of `Gera.Quaternion`.");var n=new e.Quaternion;return n.x=t.w*r.x+t.x*r.w+t.y*r.z-t.z*r.y,n.y=t.w*r.y-t.x*r.z+t.y*r.w+t.z*r.x,n.z=t.w*r.z+t.x*r.y-t.y*r.x+t.z*r.w,n.w=t.w*r.w-t.x*r.x-t.y*r.y-t.z*r.z,n},e.Math.calculateQuaternionLength=function(t){if(!(t instanceof e.Quaternion))throw new Error("Can't calculate the length of the given quaternion, because it's NOT an instance of `Gera.Quaternion`.");return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)+Math.pow(t.z,2)+Math.pow(t.w,2))},e.Math.normalizeQuaternion=function(t){if(!(t instanceof e.Quaternion))throw new Error("Can't normalize the given quaternion object, because it's NOT an instance of `Gera.Quaternion`.");var r=e.Math.calculateQuaternionLength(t);if("number"!=typeof r)throw new Error("Can't normalize the given quaternion object, because the calculated length value of it is NOT a type of `number`.");if(0===r)return new e.Quaternion;var n=1/r;return new e.Quaternion({x:t.x*n,y:t.y*n,z:t.z*n,w:t.w*n})},e.Math.checkIsIntegerPowerOf2=function(e){if("number"!=typeof e)throw new Error("Can't check if the given integer is a power of 2, because it's NOT a type of `number`.");return 0===(e&e-1)}}(r),function(e){e.Matrix=function(){throw new Error("You're trying to create an instance of abstract `Gera.Matrix` prototype.")},e.Matrix.Type={Empty:0,Identity:1,Frustum:2,Custom:3},e.Matrix.Empty=function(){if("undefined"==typeof Float32Array)throw new Error("Can't create an empty matrix, because your browser doesn't support the typed JavaScript arrays, which are required for the WebGL work.");return t()},e.Matrix.Identity=function(){for(var t=new e.Matrix.Empty,r=0;r<t.length;r++)switch(r){case 0:case 5:case 10:case 15:t[r]=1;break;case 1:case 2:case 3:case 4:case 6:case 7:case 8:case 9:case 11:case 12:case 13:case 14:t[r]=0}return t},e.Matrix.Frustum=function(t){if(!(t instanceof e.Bounds.Orthographic))throw new Error("Can't create a new frustum matrix, because the input frustum bounds object is NOT an instance of `Gera.Bounds.Orthographic`.");for(var r=t.right-t.left,n=t.top-t.bottom,o=t.far-t.near,a=new e.Matrix.Empty,i=0;i<a.length;i++)switch(i){case 0:a[i]=2*t.near/r;break;case 5:a[i]=2*t.near/n;break;case 8:a[i]=(t.right+t.left)/r;break;case 9:a[i]=(t.top+t.bottom)/n;break;case 10:a[i]=-(t.far+t.near)/o;break;case 11:a[i]=-1;break;case 14:a[i]=-(t.far*t.near*2)/o;break;case 1:case 2:case 3:case 4:case 6:case 7:case 12:case 13:case 15:a[i]=0}return a},e.Matrix.Custom=function(){o.call(this,arguments)},e.Matrix3=function(){return new Float32Array(9)};var t=function(){var e=new Float32Array(16);return e.multiplyByMatrix=r,e.translateByVector=n,e},r=function(t){if(!(t instanceof Float32Array))throw new Error("Can't multiply the current matrix by the input matrix, because the given matrix object is NOT an instance of `Float32Array`.");if(!(this instanceof Float32Array))throw new Error("Can't multiply the current matrix by the input matrix, because the scope of the current matrix object is NOT an instance of `Float32Array`.");var r=e.Math.multiplyMatrices(this,t);if(!(r instanceof Float32Array))throw new Error("Can't multiply the current matrix by the input matrix, because the result matrix from the multiplication process is NOT an instance of `Float32Array`.");if("number"!=typeof this.length)throw new Error("Can't multiply the current matrix by the input matrix, because the binded `length` property is NOT a type of `number`.");for(var n=0;n<this.length;n++)this[n]=r[n]},n=function(t){if(!(t instanceof e.Vector3))throw new Error("Can't translate the current matrix by the input vector, because the given vector object is NOT an instance of `Gera.Vector3`.");if(!(this instanceof Float32Array))throw new Error("Can't translate the current matrix by the input vector, because the scope of the current matrix object is NOT an instance of `Float32Array`.");var r=e.Math.translateMatrixByVector(this,t);if(!(r instanceof Float32Array))throw new Error("Can't translate the current matrix by the input vector, because the result matrix from the translation process is NOT an instance of `Float32Array`.");if("number"!=typeof this.length)throw new Error("Can't translate the current matrix by the input vector, because the binded `length` property is NOT a type of `number`.");for(var n=0;n<this.length;n++)this[n]=r[n]},o=function(e){if("object"!=typeof e)throw new Error("Can't handle the required arguments for creating a new `Gera.Custom.Matrix` object, because the given arguments object is NOT a type of `object`.");if(0===e.length)throw new Error("Can't handle the required arguments for creating a new `Gera.Custom.Matrix` object, because the properties count of the given object equals zero.");var t=a(e[0]);this.typed=t.vertices,this.generic=s(t.vertices,t.size)},a=function(e){if("object"!=typeof e)throw new Error("Can't extract the properties for creating a new `Gera.Custom.Matrix` object, because the given settings object is NOT a type of `object`.");return i(e.data,e.size),{vertices:e.data,size:e.size}},i=function(e,t){if(!(e instanceof Float32Array))throw new Error("Can't prepare the new custom matrix, because the input vertices list is NOT an instance of `Float32Array`.");if("number"!=typeof t)throw new Error("Can't prepare the new custom matrix, because the input size component is NOT a type of `number`.");if(-1===[2,3,4].indexOf(t))throw new Error("Can't prepare the new custom matrix, because the input size component has the incorrect value. Component size must be one of the following values: [ 2, 3, 4 ].");if(e.length%t!==0)throw new Error("Can't prepare the new custom matrix, because the vertices array length is NOT a multiply of the size value.")},s=function(e,t){switch(c(e),t){case 2:return h(e);case 3:return u(e);case 4:return f(e);default:throw new Error("Can't create a new `Gera.Matrix.Custom` object, because the given size value is unacceptable for the dimension of the new matrix. Acceptable size value is in the next range: [ 2-4 ].")}},c=function(e){if(!(e instanceof Float32Array))throw new Error("Can't check the input vertices object for creating a new matrix, because it's NOT an instance of `Float32Array`.");if(e.length<2)throw new Error("Input vertices can't be allowed to be used for creating a new matrix because the count of its elements is less than 2.")},h=function(t){for(var r=new Array,n=0;n<t.length;n+=2)r.push(new e.Vector2({x:t[n],y:t[n+1]}));return r},u=function(t){for(var r=new Array,n=0;n<t.length;n+=3)r.push(new e.Vector3({x:t[n],y:t[n+1],z:t[n+2]}));return r},f=function(t){for(var r=new Array,n=0;n<t.length;n+=4)r.push(new e.Vector4({x:t[n],y:t[n+1],z:t[n+2],i:t[n+3]}));return r}}(r);var n=function(){throw new Error("You're trying to create an instance of abstract `Gera.Shader` prototype.")};n.Type={Vertex:0,Fragment:1};var o=function(e){if(!(e instanceof WebGLRenderingContext))throw new Error("Given argument for the new shader manager is NOT an instance of `WebGLRenderingContext`.");this.webglContext=e};o.prototype.createShaderProgram=function(){if(!(this.webglContext instanceof WebGLRenderingContext))throw new Error("Can't create a new shader program, because the current WebGL context is NOT an instance of `WebGLRenderingContext`.");var e=this.webglContext.createProgram();if(!(e instanceof WebGLProgram))throw new Error("Current WebGL context wasn't able to create a new `WebGLProgram` instance.");var t=this.createShader(n.Type.Vertex),r=this.createShader(n.Type.Fragment);return this.setShadersForShaderProgram(e,t,r),e},o.prototype.createShader=function(e){if(e===n.Type.Vertex){var t=this.webglContext.createShader(this.webglContext.VERTEX_SHADER);return this.handleShaderObject(t,this.getVertexShaderSource()),t}if(e===n.Type.Fragment){var r=this.webglContext.createShader(this.webglContext.FRAGMENT_SHADER);return this.handleShaderObject(r,this.getFragmentShaderSource()),r}throw new Error("Can't create a new shader object with the given shader type. Possible enumeration value is one of the next: [ Shader.Type.Vertex, Shader.Type.Fragment ].")},o.prototype.handleShaderObject=function(e,t){if(this.webglContext.shaderSource(e,t),this.webglContext.compileShader(e),!this.webglContext.getShaderParameter(e,this.webglContext.COMPILE_STATUS)){var r=this.webglContext.getShaderInfoLog(e);throw this.webglContext.deleteShader(e),new Error(String.prototype.concat("Can't compile the shader with the given source code. Error message from the WebGL context about the shader compilation failure:\r\n",r))}},o.prototype.setShadersForShaderProgram=function(e,t,r){if(!(e instanceof WebGLProgram))throw new Error("Can't initialize a new shader program with the given shaders, because input shader program is NOT an instance of `WebGLProgram`.");if(!(t instanceof WebGLShader))throw new Error("Can't initialize a new shader program with the given shaders, because input vertex shader is NOT an instance of `WebGLShader`.");if(!(r instanceof WebGLShader))throw new Error("Can't initialize a new shader program with the given shaders, because input fragment shader is NOT an instance of `WebGLShader`.");if(this.webglContext.attachShader(e,t),this.webglContext.attachShader(e,r),this.webglContext.linkProgram(e),!this.webglContext.getProgramParameter(e,this.webglContext.LINK_STATUS)){var n=this.webglContext.getProgramInfoLog(e);throw this.webglContext.deleteProgram(e),new Error(String.prototype.concat("Can't link a shader program with the given shaders. Error message from the WebGL context about the linkage failure:\r\n",n))}this.prepareUniformsForShaderProgram(e),this.prepareAttributesForShaderProgram(e)},o.prototype.prepareUniformsForShaderProgram=function(e){if(!(e instanceof WebGLProgram))throw new Error("Can't prepare the uniforms locations for the shader program, because the shader program object is NOT an instance of `WebGLProgram`.");e.uniforms={projectionMatrix:this.prepareUniformLocation(e,"projectionMatrix"),modelViewMatrix:this.prepareUniformLocation(e,"modelViewMatrix"),normalMatrix:this.prepareUniformLocation(e,"normalMatrix"),ambientColor:this.prepareUniformLocation(e,"ambientColor"),lightingDirection:this.prepareUniformLocation(e,"lightingDirection"),directionalColor:this.prepareUniformLocation(e,"directionalColor"),lightingEnabled:this.prepareUniformLocation(e,"lightingEnabled"),textureSampler:this.prepareUniformLocation(e,"textureSampler"),alphaValue:this.prepareUniformLocation(e,"alphaValue"),hasMeshTexture:this.prepareUniformLocation(e,"hasMeshTexture")}},o.prototype.prepareUniformLocation=function(e,t){if(!(e instanceof WebGLProgram))throw new Error("Can't prepare a uniform location for the shader program, because the shader program object is NOT an instance of `WebGLProgram`.");if("string"!=typeof t)throw new Error("Can't prepare a uniform location for the shader program, because the uniform name is NOT a type of `string`.");if(0===t.length)throw new Error("Can't prepare a uniform location for the shader program, because the uniform name is an empty string.");var r=this.webglContext.getUniformLocation(e,t);if(!(r instanceof WebGLUniformLocation))throw new Error(String.prototype.concat("Can't get the uniform location by name: `",t,"` So, can't prepare a uniform location for the shader program object."));return r},o.prototype.prepareAttributesForShaderProgram=function(e){if(!(e instanceof WebGLProgram))throw new Error("Can't prepare the attributes locations for the shader program, because the shader program object is NOT an instance of `WebGLProgram`.");e.attributes={vertexPosition:this.prepareAttributeLocation(e,"vertexPosition"),vertexColor:this.prepareAttributeLocation(e,"vertexColor"),vertexTexture:this.prepareAttributeLocation(e,"vertexTextureUv"),vertexNormal:this.prepareAttributeLocation(e,"vertexNormal")},this.enableVertexAttributes(e.attributes)},o.prototype.prepareAttributeLocation=function(e,t){if(!(e instanceof WebGLProgram))throw new Error("Can't prepare an attribute location for the shader program, because the shader program object is NOT an instance of `WebGLProgram`.");if("string"!=typeof t)throw new Error("Can't prepare an attribute location for the shader program, because the attribute name is NOT a type of `string`.");if(0===t.length)throw new Error("Can't prepare an attribute location for the shader program, because the attribute name is an empty string.");var r=this.webglContext.getAttribLocation(e,t);if("number"!=typeof r||-1===r)throw new Error(String.prototype.concat("Can't get the attribute location by name: `",t,"` So, can't prepare an attribute location for the shader program object."));return r},o.prototype.enableVertexAttributes=function(e){if("object"!=typeof e)throw new Error("Can't enable the vertex attributes, because attributes object is NOT a type of `object`.");this.enableVertexAtrributeArray(e.vertexPosition),this.enableVertexAtrributeArray(e.vertexNormal)},o.prototype.enableVertexAtrributeArray=function(e){if("number"!=typeof e)throw new Error("Can't enable the vertex attribute array, because the input attribute index is NOT a type of `number`.");this.webglContext.enableVertexAttribArray(e)},o.prototype.getVertexShaderSource=function(){return"precision highp float;            attribute vec3 vertexPosition;            attribute vec4 vertexColor;            attribute vec2 vertexTextureUv;            attribute vec3 vertexNormal;            uniform mat4 modelViewMatrix;            uniform mat4 projectionMatrix;            uniform mat3 normalMatrix;            uniform vec3 ambientColor;            uniform vec3 lightingDirection;            uniform vec3 directionalColor;            uniform bool lightingEnabled;            varying vec4 vertexColorReference;            varying vec2 vertexTextureUvReference;            varying vec3 vertexLightColorReference;                        void main( void ) {                gl_Position = projectionMatrix * modelViewMatrix * vec4( vertexPosition, 1.0 );                vertexColorReference = vertexColor;                vertexTextureUvReference = vertexTextureUv;                                if ( !lightingEnabled )                    vertexLightColorReference = vec3( 1.0, 1.0, 1.0 );                else {                    vec3 transofrmedNormal = normalMatrix * vertexNormal;                    float lightWeight = max( dot ( transofrmedNormal, lightingDirection ), 0.0 );                    vertexLightColorReference = ambientColor + directionalColor * lightWeight;                }            }"},o.prototype.getFragmentShaderSource=function(){return"precision highp float;            uniform sampler2D textureSampler;            uniform float alphaValue;            uniform bool hasMeshTexture;            varying vec4 vertexColorReference;            varying vec2 vertexTextureUvReference;            varying vec3 vertexLightColorReference;                        void main( void ) {                if ( hasMeshTexture ) {                    vec4 texel = texture2D( textureSampler, vec2( vertexTextureUvReference.s, vertexTextureUvReference.t ) );                    gl_FragColor = vec4( texel.rgb * vertexLightColorReference, texel.a * alphaValue );                }                else                    gl_FragColor = vec4( vertexColorReference.rgb * vertexLightColorReference, vertexColorReference.a * alphaValue );            }"},function(e){e.Color=function(){this.needsUpdate=!1;var e=["integer","hexadecimalString","rgba","glFloat"];for(var r in e)this[e[r]]=null;t.call(this,arguments[0])},e.Color.Type={Integer:0,HexadecimalString:1,RgbaObject:2,GlFloat:3},e.Color.prototype.set=function(t,r){switch(t){case e.Color.Type.Integer:n.call(this,r);break;case e.Color.Type.HexadecimalString:o.call(this,r);break;case e.Color.Type.RgbaObject:a.call(this,r);break;case e.Color.Type.GlFloat:i.call(this,r);break;default:throw new Error("You didn't provide the correct color type for setting the new color.")}},e.Color.Rgba=function(){s(arguments),c(this,arguments[0])},e.Color.GlFloat=function(){s(arguments),c(this,arguments[0])};var t=function(e){"object"==typeof e&&r.call(this,e.type,e.value)},r=function(t,r){if("number"!=typeof t)throw new Error("Can't create a new `Gera.Color` object, because the given color type is NOT a type of `number`.");switch(t){case e.Color.Type.Integer:n.call(this,r);break;case e.Color.Type.HexadecimalString:o.call(this,r);break;case e.Color.Type.RgbaObject:a.call(this,new e.Color.Rgba({red:r.red,green:r.green,blue:r.blue,alpha:r.alpha}));break;case e.Color.Type.GlFloat:i.call(this,new e.Color.Rgba({red:r.red,green:r.green,blue:r.blue,alpha:r.alpha}));break;default:throw new Error("Can't create a new `Gera.Color` object, because the given color type is NOT associated with any one type, existed in the `Gera.Color.Type` enumeration.")}},n=function(e){if("number"!=typeof e)throw new Error("Can't set a new color using integer value, because input value is NOT a type of `number`.");this.integer=e,this.hexadecimalString=this.convertIntegerToHexString(e),this.rgba=this.convertIntegerToRgbaObject(e),this.glFloat=this.convertIntegerToGlFloatObject(e)},o=function(e){if("string"!=typeof e)throw new Error("Can't set a new color using hexadecimal string, because input value is NOT a type of `string`.");this.hexadecimalString=e,this.integer=this.convertHexStringToInteger(e),this.rgba=this.convertHexStringToRgbaObject(e),this.glFloat=this.convertHexStringToGlFloatObject(e)},a=function(t){if(!(t instanceof e.Color.Rgba))throw new Error("Can't set a new color using RGBA object, because input value is NOT an instance of `Gera.Color.Rgba`.");this.rgba=t,this.integer=this.convertRgbaObjectToInteger(t),this.hexadecimalString=this.convertRgbaObjectToHexString(t),this.glFloat=this.convertRgbaObjectToGlFloatObject(t)},i=function(t){if(!(t instanceof e.Color.GlFloat))throw new Error("Can't set a new color using GL float object, because input value is NOT an instance of `Gera.Color.GlFloat`.");this.glFloat=t,this.integer=this.convertGlFloatObjectToInteger(t),this.hexadecimalString=this.convertGlFloatObjectToHexString(t),this.rgba=this.convertGlFloatObjectToRgbaObject(t)},s=function(){if(1!==arguments.length)throw new Error("There could be only a one input argument for the color component constructor.");if("object"!=typeof arguments[0])throw new Error("Input argument is not a type of `object`.")},c=function(e,t){for(var r in t)switch(r){case"red":e.red=t[r];break;case"green":e.green=t[r];break;case"blue":e.blue=t[r];break;case"alpha":e.alpha=t[r];break;default:throw new Error(String.prototype.concat("Can't set the color component properties, because the input property has an invalid name. You have provided the next value: `",r,"`. Possible value is the one from the next list: [ red, green, blue, alpha ]."))}}}(r),function(e){e.Color.prototype.convertRgbPartToInteger=function(e){if("number"!=typeof e)throw new Error("Can't convert RGB part to the integer value, it's NOT a type of `number`.");var t=this.convertRgbPartToHexString(e),r=parseInt(t,16);return r},e.Color.prototype.convertRgbPartToHexString=function(e){if("number"!=typeof e)throw new Error("Can't convert RGB part to the hexadecimal string, because it's NOT a type of `number`.");e=Math.max(0,Math.min(e,255));var t=String.prototype.concat("0123456789abcdef".charAt((e-e%16)/16),"0123456789abcdef".charAt(e%16));return t},e.Color.prototype.convertRgbPartToGlFloatValue=function(e){if("number"!=typeof e)throw new Error("Can't convert RGB part to the GL float value, because it's NOT a type of `number`.");var t=1/255*e;return t}}(r),function(e){e.Color.prototype.convertRgbaObjectToInteger=function(t){if(!(t instanceof e.Color.Rgba))throw new Error("Can't convert RGBA object to the integer value, because it's NOT an instance of `Gera.Color.Rgba`.");var r=String.prototype.concat(this.convertRgbPartToHexString(t.red),this.convertRgbPartToHexString(t.green),this.convertRgbPartToHexString(t.blue)),n=parseInt(r,16);return n},e.Color.prototype.convertRgbaObjectToHexString=function(t){if(!(t instanceof e.Color.Rgba))throw new Error("Can't convert RGBA object to the hexadecimal value, because it's NOT an instance of `Gera.Color.Rgba`.");var r=String.prototype.concat("#",this.convertRgbPartToHexString(t.red),this.convertRgbPartToHexString(t.green),this.convertRgbPartToHexString(t.blue));return r},e.Color.prototype.convertRgbaObjectToGlFloatObject=function(t){if(!(t instanceof e.Color.Rgba))throw new Error("Can't convert RGBA object to the GL float object, because it's NOT an instance of `Gera.Color.Rgba`.");var r=new e.Color.GlFloat({red:this.convertRgbPartToGlFloatValue(t.red),green:this.convertRgbPartToGlFloatValue(t.green),blue:this.convertRgbPartToGlFloatValue(t.blue),alpha:this.convertRgbPartToGlFloatValue(t.alpha)});return r}}(r),function(e){e.Color.prototype.convertIntegerToHexString=function(e){if("number"!=typeof e)throw new Error("Can't convert integer value to the hexadecimal string, because it's NOT a type of `number`.");var t=String.prototype.concat("#",e.toString(16));return t},e.Color.prototype.convertIntegerToRgbaObject=function(t){if("number"!=typeof t)throw new Error("Can't convert integer value to the RGBA object, because it's NOT a type of `number`.");if(t){var r=new e.Color.Rgba({red:t>>16&255,green:t>>8&255,blue:255&t,alpha:255});return r}},e.Color.prototype.convertIntegerToGlFloatObject=function(t){if("number"!=typeof t)throw new Error("Can't convert integer value to the GL float object, because it's NOT a type of `number`.");var r=new e.Color.GlFloat({red:1/255*(t>>16&255),green:1/255*(t>>8&255),blue:1/255*(255&t),alpha:1});return r}}(r),function(e){e.Color.prototype.convertHexStringToInteger=function(e){if("string"!=typeof e)throw new Error("Can't convert hexadecimal string to the integer value, because it's NOT a type of `string`.");if("#"!==e[0])throw new Error("Can't convert hexadecimal string to the integer value, because it was given in invalid format. The first character of string is NOT the `#` symbol. Valid format is the next: `#0000ff`.");var t=e.substring(1,e.length),r=parseInt(t,16);return r},e.Color.prototype.convertHexStringToRgbaObject=function(e){if("string"!=typeof e)throw new Error("Can't convert hexadecimal string to the RGBA object, because it's NOT a type of `string`.");if("#"!==e[0])throw new Error("Can't convert hexadecimal string to the RGBA object, because it was given in invalid format. The first character of string is NOT the `#` symbol. Valid format is the next: `#0000ff`.");var t=e.substring(1,e.length),r=parseInt(t,16);return this.convertIntegerToRgbaObject(r)},e.Color.prototype.convertHexStringToGlFloatObject=function(e){if("string"!=typeof e)throw new Error("Can't convert hexadecimal string to the GL float object, because it's NOT a type of `string`.");if("#"!==e[0])throw new Error("Can't convert hexadecimal string to the RGBA object, because it was given in invalid format. The first character of string is NOT the `#` symbol. Valid format is the next: `#0000ff`.");var t=e.substring(1,e.length),r=parseInt(t,16);return this.convertIntegerToGlFloatObject(r)}}(r),function(e){e.Color.prototype.convertGlFloatValueToRgbPart=function(e){if("number"!=typeof e)throw new Error("Can't convert GL float value to the RGB part, because it's NOT a type of `number`.");var t=Math.ceil(e/(1/255));return t},e.Color.prototype.convertGlFloatObjectToInteger=function(t){if(!(t instanceof e.Color.GlFloat))throw new Error("Can't convert GL float object to the integer value, because it's NOT an instance of `Gera.Color.GlFloat`.");var r=new e.Color.Rgba({red:this.convertGlFloatValueToRgbPart(t.red),green:this.convertGlFloatValueToRgbPart(t.green),blue:this.convertGlFloatValueToRgbPart(t.blue),alpha:this.convertGlFloatValueToRgbPart(t.alpha)}),n=this.convertRgbaObjectToInteger(r);return n},e.Color.prototype.convertGlFloatObjectToHexString=function(t){if(!(t instanceof e.Color.GlFloat))throw new Error("Can't convert GL float object to the hexadecimal string, because it's NOT an instance of `Gera.Color.GlFloat`.");var r=new e.Color.Rgba({red:this.convertGlFloatValueToRgbPart(t.red),green:this.convertGlFloatValueToRgbPart(t.green),blue:this.convertGlFloatValueToRgbPart(t.blue),alpha:this.convertGlFloatValueToRgbPart(t.alpha)}),n=this.convertRgbaObjectToHexString(r);return n},e.Color.prototype.convertGlFloatObjectToRgbaObject=function(t){if(!(t instanceof e.Color.GlFloat))throw new Error("Can't convert GL float object to the RGBA object, because it's NOT an instance of `Gera.Color.GlFloat`.");var r=new e.Color.Rgba({red:this.convertGlFloatValueToRgbPart(t.red),green:this.convertGlFloatValueToRgbPart(t.green),blue:this.convertGlFloatValueToRgbPart(t.blue),alpha:this.convertGlFloatValueToRgbPart(t.alpha)});return r}}(r),function(e){e.Geometry=function(){var e=t(arguments);r.call(this,e)},e.Geometry.Type={Custom:0,Triangle:1,Plane:2,Cube:3,Pyramid:4,Sphere:5},e.Geometry.Settings=function(e){f(e);for(var t in e)this[t]=e[t]},e.Geometry.Extruded=function(e,t){if(!(e instanceof Array))throw new Error("Can't prepare the extruded geometry object, because the input vertices argument is NOT an instance of `Array`.");if(0===e.length)throw new Error("Can't prepare the extruded geometry object, because the input vertices array length equals zero.");if("number"!=typeof t)throw new Error("Can't prepare the extruded geometry object, because the input level argument is NOT a type of `number`.");if(0>t)throw new Error("Can't prepare the extruded geometry object, because the input level argument is less than zero.");return b(e,t)};var t=function(t){if(1!==t.length)throw new Error(String.prototype.concat("There could be only the one input argument for the `Gera.Geometry` constructor, but you've provided the ",t.length," arguments for it."));var r=t[0];if("object"!=typeof r)throw new Error("Can't handle the input geometry settings, because it's NOT a type of `object`.");return new e.Geometry.Settings({type:r.type,vertices:r.vertices,indices:r.indices,uvCoordinates:r.uvCoordinates,uvIndices:r.uvIndices})},r=function(t){if(!(t instanceof e.Geometry.Settings))throw new Error("Can't handle the input geometry from client, because the given settings object is NOT an instance of `Gera.Geometry.Settings`.");switch(n.call(this,t.type),this.type){case e.Geometry.Type.Custom:o.call(this,t);break;case e.Geometry.Type.Cube:case e.Geometry.Type.Sphere:case e.Geometry.Type.Triangle:case e.Geometry.Type.Plane:case e.Geometry.Type.Pyramid:i.call(this);break;default:throw new Error("Can't prepare a new geometry object, because the given geometry type is NOT associated with any one type, existed in the `Gera.Geometry.Type` enumeration.")}},n=function(t){if("number"!=typeof t)throw new Error("The property `type` from input geometry settings object is NOT a type of `number`.");var r=Object.keys(e.Geometry.Type).map(function(t){return e.Geometry.Type[t]});if(-1===r.indexOf(t))throw new Error("Can't set the geometry type for the input object, because its geometry type doesn't exist in `Gera.Geometry.Type` enumeration values.");this.type=t},o=function(t){if(!(t instanceof e.Geometry.Settings))throw new Error("Can't handle the custom geometry, because the given settings object is NOT an instance of `Gera.Geometry.Settings`.");s.call(this,t.vertices),c.call(this,t.indices),h.call(this,t.uvCoordinates),u.call(this,t.uvIndices)},i=function(){if("number"!=typeof this.type)throw new Error("Can't handle the geometry of the some primitive, because the binded `type` property is NOT a type of `number`.");var e=a.getDataByGeometryType(this.type);if("object"!=typeof e)throw new Error("Can't handle the geometry of the some primitive, because the fetched data of the geometric primitive is NOT a type of `object`.");for(var t in e)this[t]=e[t]},s=function(t){if(!(t instanceof Array))throw new Error("Can't create a new matrix of vertices for the custom geometry object, because the input generic vertices list is NOT an instance of `Array`.");for(var r=[],n=0;n<t.length;n++){var o=t[n];if(!(o instanceof e.Vector3))throw new Error("Can't create a new matrix of vertices for the custom geometry object, because the vertex from the custom vertices list is NOT an instance of `Gera.Vector3`.");r.push(o.x),r.push(o.y),r.push(o.z)}this.vertices=new e.Matrix.Custom({data:new Float32Array(r),size:Object.keys(new e.Vector3).length})},c=function(t){if(this.indices=[],t instanceof Array&&t.length>0)for(var r=0;r<t.length;r++){if("number"!=typeof t[r])throw new Error("Can't add an index from the input array, because it's NOT a type of `number`.");this.indices.push(t[r])}else{if(!(this.vertices instanceof e.Matrix.Custom))throw new Error("Can't prepare the indices from the vertices list, which is binded as `vertices` property, because it's NOT an instance of `Gera.Matrix.Custom`.");for(var r=0;r<this.vertices.generic.length;r++)this.indices.push(r)
}0===this.indices.length&&(this.indices=null)},h=function(t){if(this.uvCoordinates=null,t instanceof Array&&t.length>0){for(var r=[],n=0;n<t.length;n++){var o=t[n];if(!(o instanceof e.Vector2))throw new Error("Can't create a new matrix of UV-coordinates for the custom geometry object, because the UV-coordinate extracted from the given list is NOT an instance of `Gera.Vector2`.");r.push(o.x),r.push(o.y)}this.uvCoordinates=new e.Matrix.Custom({data:new Float32Array(r),size:Object.keys(new e.Vector2).length})}},u=function(e){if(this.uvIndices=null,e instanceof Array&&e.length>0){this.uvIndices=[];for(var t=0;t<e.length;t++){if("number"!=typeof e[t])throw new Error("Can't add the UV-coordinate index from the UV-indices list, because it's NOT a type of `number`.");this.uvIndices.push(e[t])}}},f=function(t){var r=["type","vertices","indices","uvCoordinates","uvIndices"];if(!e.Global.checkElementsExistenceInArray(Object.keys(t),r))throw new Error("The properties, which were given as the geometry settings are incorrect. `Gera.Geometry.Settings` may accept only the following properties: [ type, vertices, indices, uvCoordinates, uvIndices ].");for(var n in t)switch(n){case"vertices":case"indices":case"uvCoordinates":case"uvIndices":l(t[n],n);break;case"type":if("number"!=typeof t[n])throw new Error("Can't allow to create a new `Gera.Geometry.Settings` object, because the property `type` is NOT a type of `number`.")}},l=function(e,t){if(void 0!==e&&!(e instanceof Array))throw new Error(String.prototype.concat("Can't allow to create a new `Gera.Geometry.Settings` object, because the property `",t,"` is NOT an instance of `Array`."));e=null},b=function(t,r){for(var n=[],o=0;o<t.length;o++){var a=t[o];if(!(a instanceof e.Vector2))throw new Error("Can't prepare the extruded geometry object, because the vertex item in the vertices array is NOT an instance of `Gera.Vector2`.");n.push(new e.Vector3({x:a.x,y:a.y,z:r})),r>0&&n.push(new e.Vector3({x:a.x,y:a.y,z:0}))}return 0===n.length?null:n}}(r);var a=function(){throw new Error("You're trying to create an instance of abstract `GeometryPrimitives` prototype.")};a.getDataByGeometryType=function(e){if("number"!=typeof e)throw new Error("Can't get the geometry data by the given type, because it's NOT a type of `number`.");switch(e){case Gera.Geometry.Type.Triangle:return i();case Gera.Geometry.Type.Plane:return s();case Gera.Geometry.Type.Cube:return c();case Gera.Geometry.Type.Pyramid:return h();case Gera.Geometry.Type.Sphere:return u();default:throw new Error("Can't get the geometry data by the given type, because the given geometry type is NOT recognized as the primitive type.")}};var i=function(){return{vertices:new Gera.Matrix.Custom({data:new Float32Array([-1,-1,0,1,-1,0,0,1,0]),size:Object.keys(new Gera.Vector3).length}),indices:[0,1,2],uvCoordinates:null,uvIndices:null}},s=function(){return{vertices:new Gera.Matrix.Custom({data:new Float32Array([-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0,1,1,0]),size:Object.keys(new Gera.Vector3).length}),indices:[0,1,2,3,4,5],uvCoordinates:new Gera.Matrix.Custom({data:new Float32Array([0,1,0,0,1,1,0,0,1,0,1,1]),size:Object.keys(new Gera.Vector2).length}),uvIndices:null,normals:new Gera.Matrix.Custom({data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1]),size:Object.keys(new Gera.Vector3).length}),normalIndices:null}},c=function(){return{vertices:new Gera.Matrix.Custom({data:new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),size:Object.keys(new Gera.Vector3).length}),indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],uvCoordinates:new Gera.Matrix.Custom({data:new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),size:Object.keys(new Gera.Vector2).length}),uvIndices:null,normals:new Gera.Matrix.Custom({data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),size:Object.keys(new Gera.Vector3).length}),normalIndices:null}},h=function(){return{vertices:new Gera.Matrix.Custom({data:new Float32Array([0,1,0,-1,-1,1,1,-1,1,0,1,0,1,-1,1,1,-1,-1,0,1,0,1,-1,-1,-1,-1,-1,0,1,0,-1,-1,-1,-1,-1,1]),size:Object.keys(new Gera.Vector3).length}),indices:[0,1,2,3,4,5,6,7,8,9,10,11],uvCoordinates:null,uvIndices:null}},u=function(){for(var e={range:{latitude:20,longitude:20},radius:2},t=[],r=[],n=0;n<=e.range.latitude;n++)for(var o=n*Math.PI/e.range.latitude,a=Math.sin(o),i=Math.cos(o),s=0;s<=e.range.longitude;s++){var c=2*s*Math.PI/e.range.longitude,h=Math.sin(c),u=Math.cos(c),f=new Gera.Vector3({x:e.radius*u*a,y:e.radius*i,z:e.radius*h*a});for(var l in f)"number"==typeof f[l]&&t.push(f[l])}for(var n=0;n<e.range.latitude;n++)for(var s=0;s<e.range.longitude;s++){var b=n*(e.range.longitude+1)+s,p=b+e.range.longitude+1;r.push(b),r.push(p),r.push(b+1),r.push(p),r.push(p+1),r.push(b+1)}return{vertices:new Gera.Matrix.Custom({data:new Float32Array(t),size:Object.keys(new Gera.Vector3).length}),indices:r,uvCoordinates:null,uvIndices:null}};!function(e){e.Texture=function(){t.call(this,arguments),this.guid=new e.Guid},e.Texture.Type={Color:0,Image:1,Video:2},e.Texture.checkIsMultimediaTexture=function(t){if(!(t instanceof e.Texture))throw new Error("Can't check if the given texture type is the multimedia one, because the given texture object is NOT an instance of `Gera.Texture`.");if("number"!=typeof t.type)throw new Error("Can't check if the given texture type is the multimedia one, because the property `type` from the texture object is NOT a type of `number`.");switch(t.type){case e.Texture.Type.Image:case e.Texture.Type.Video:return!0;case e.Texture.Type.Color:return!1;default:throw new Error("Can't check if the given texture type is the multimedia one, because the value of property `type`, from the texture object, is NOT associated with any value in `Gera.Texture.Type` enumeration.")}};var t=function(e){if(1!==e.length)throw new Error("Can't create a new `Gera.Texture` object, because it must accept some arguments.");if("object"!=typeof e[0])throw new Error("Can't create a new `Gera.Texture` object, because the input arguments object is NOT a type of `object`.");if(2!==Object.keys(e[0]).length)throw new Error("Can't create a new `Gera.Texture` object, because the count of the input arguments must equal 2.");r.call(this,e[0])},r=function(t){if("object"!=typeof t)throw new Error("Can't handle the texture object, because the given properties object is NOT a type of `object`.");switch(n.call(this,t.type),this.type){case e.Texture.Type.Color:o.call(this,t.color);break;case e.Texture.Type.Image:a.call(this,t.path);break;case e.Texture.Type.Video:i.call(this,t.path);break;default:throw new Error("Can't handle the texture object, because the binded property `type` is NOT associated with any existed texture type in `Gera.Texture.Type` enumeration.")}},n=function(t){if("number"!=typeof t)throw new Error("Can't set a texture type, because the given type value is NOT a type of `number`.");var r=e.Global.convertObjectPropertiesToArray(e.Texture.Type);if(-1===r.indexOf(t))throw new Error("Can't set a texture type, because the given type value is not one from `Gera.Texture.Type`.");this.type=t},o=function(t){if("number"!=typeof t)throw new Error("Can't set a texture color, because the given color value is NOT a type of `number`.");var r=new e.Color;r.set(e.Color.Type.Integer,t),this.color=r},a=function(e){if("string"!=typeof e)throw new Error("Can't set the image texture, because the given file path of it is NOT a type of `string`.");this.path=e,this.initialized=!1,this.image=new Image,this.image.initialized=!1,s(this.path).then(function(e){if(!(e instanceof Blob))throw new Error("Can't set the image texture, because the fetched object by the given file path is NOT an instance of `Blob`.");var t=window.URL.createObjectURL(e);this.image.src=t,this.image.initialized=!0}.bind(this))},i=function(e){if("string"!=typeof e)throw new Error("Can't set the video texture, because the given file path of it is NOT a type of `string`.");this.path=e,this.initialized=!1,this.video=document.createElement("video"),this.video.initialized=!1,s(this.path).then(function(e){if(!(e instanceof Blob))throw new Error("Can't set the video texture, because the fetched object by the given file path is NOT an instance of `Blob`.");var t=window.URL.createObjectURL(e);this.video.src=t,this.video.initialized=!0}.bind(this))},s=function(t){if("string"!=typeof t)throw new Error("Can't fetch the BLOB object by the given URL endpoint, because the given URL endpoint is NOT a type of `string`.");var r=new e.Promise;return e.Ajax.sendRequest(new e.Ajax.Request({method:e.Ajax.HttpMethod.Get,endpoint:t,asynchronous:!0,responseType:e.Ajax.ResponseType.Blob})).then(function(e){if(!(e instanceof Blob))throw new Error("Can't resolve the fetched BLOB object by the given URL endpoint, because it's NOT an instance of `Blob`.");r.resolve(e)}),r}}(r),function(e){e.Material=function(t){if(this.textures=null,t instanceof e.Texture)s.call(this,t);else{if(!(t instanceof Array))throw new Error("Can't add the input object to the material group, because it's NOT an instance of `Gera.Texture` or NOT an array of textures, where each element is an instance of `Gera.Texture`.");c.call(this,t)}},e.Material.prototype.get=function(n){if(n instanceof e.Guid)t.call(this,n);else{if("string"!=typeof n)throw new Error("Can't get the texture from the material group, because the given GUID-object is NEITHER an instance of `Gera.Guid`, NOR a type of `string`.");r.call(this,n)}},e.Material.prototype.add=function(t){if(t instanceof e.Texture)n.call(this,t);else{if(!(t instanceof Array))throw new Error("Can't add the texture(s) to the material group, because the given object is NEITHER an instance of `Gera.Texture`, NOR an instance of `Array`.");o.call(this,t)}},e.Material.prototype.remove=function(t){if(t instanceof e.Guid)a.call(this,t);else{if("string"!=typeof t)throw new Error("Can't remove the texture from the material group, because the given GUID-object is NEITHER an instance of `Gera.Guid`, NOR a type of `string`.");i.call(this,t)}};var t=function(t){if(!(t instanceof e.Guid))throw new Error("Can't get the texture from the material group, because the given GUID-object is NOT an instance of `Gera.Guid`.");h(this.textures);for(var r=0;r<this.textures.length;r++)if(this.textures[r].guid===t)return this.textures[r];return null},r=function(e){if("string"!=typeof e)throw new Error("Can't get the texture from the material group, because the given GUID-sequence value is NOT an type of `string`.");h(this.textures);for(var t=0;t<this.textures.length;t++)if(this.textures[t].guid.sequence===e)return this.textures[t];return null},n=function(t){if(!(t instanceof e.Texture))throw new Error("Can't add the input texture to the material group, because it's NOT an instance of `Gera.Texture`.");s.call(this,t)},o=function(e){if(!(e instanceof Array))throw new Error("Can't add the input array with textures to the material group, because the given object is NOT an instance of `Array`.");c.call(this,e)},a=function(t){if(!(t instanceof e.Guid))throw new Error("Can't remove the texture from the material group, because the given GUID-object is NOT an instance of `Gera.Guid`.");h(this.textures);for(var r=0;r<this.textures.length;r++)this.textures[r].guid===t&&this.textures.splice(r,1)},i=function(e){if("string"!=typeof e)throw new Error("Can't remove the texture from the material group, because the given GUID-sequence value is NOT an type of `string`.");h(this.textures);for(var t=0;t<this.textures.length;t++)this.textures[t].guid.sequence===e&&this.textures.splice(t,1)},s=function(t){if(!(t instanceof e.Texture))throw new Error("Can't handle the input texture object, because it's NOT an instance of `Gera.Texture`.");this.textures instanceof Array||(this.textures=[]),this.textures.push(t)},c=function(t){if(!(t instanceof Array))throw new Error("Can	 handle the input array with textures, because the given object is NOT an instance of `Array`.");this.textures instanceof Array||(this.textures=[]);for(var r=0;r<t.length;r++){if(!(t[r]instanceof e.Texture))throw new Error("Can't continue to handle the input array with textures, because the texture element from the given array is NOT an instance of `Gera.Texture`.");this.textures.push(texture)}},h=function(e){if(!(e instanceof Array))throw new Error("Can't remove the texture from the material group, because the binded texture array is NOT an instance of `Array`.");if(0===e.length)throw new Error("Can't remove the texture from the material group, because the binded texture array is empty.")}}(r),function(e){function t(){if(!(this instanceof e.Light))throw new Error("Can't set properties for the new `Gera.Light` object, because the current context is NOT an instance of `Gera.Light`.");this.posititon=new e.Vector3,this.direction=new e.Vector3,this.color=new e.Color({type:e.Color.Type.RgbaObject,value:{red:255,green:255,blue:255,alpha:255}})}function r(e){"object"==typeof e&&(n.call(this,e.type),o.call(this,e.posititon),a.call(this,e.direction),i.call(this,e.color))}function n(t){if("number"!=typeof t)throw new Error("Can't create the new `Gera.Light` object, because the given light type value is NOT a type of `number`.");if(!(this instanceof e.Light))throw new Error("Can't handle the input light type, because the current context is NOT an instance of `Gera.Light`.");switch(t){case e.Light.Type.Point:case e.Light.Type.Directional:case e.Light.Type.Spot:case e.Light.Type.Hemispheric:this.type=t;break;default:throw new Error("Can't create the new `Gera.Light` object, because the given light type value is NOT associated with any one type, existed in the `Gera.Light.Type` enumeration.")}}function o(t){if(t){if(!(t instanceof e.Vector3))throw new Error("Can't create the new `Gera.Light` object, because the given posititon object is NOT an instance of `Gera.Vector3`.");this.posititon=t}else this.posititon=new e.Vector3}function a(t){if(t){if(!(t instanceof e.Vector3))throw new Error("Can't create the new `Gera.Light` object, because the given direction object is NOT an instance of `Gera.Vector3`.");this.direction=t}else this.direction=new e.Vector3}function i(t){if(t){if(!(t instanceof e.Color))throw new Error("Can't create the new `Gera.Light` object, because the given color object is NOT an instance of `Gera.Color`.");this.color=t}else this.color=new e.Color({type:e.Color.Type.RgbaObject,value:{red:255,green:255,blue:255,alpha:255}})}e.Light=function(){t.call(this),r.call(this,arguments[0])},e.Light.Type={Point:0,Directional:1,Spot:2,Hemispheric:3}}(r),function(e){e.Buffer=function(){throw new Error("You're trying to create an instance of abstract `Gera.Buffer` prototype.")},e.Buffer.RenderingInfo=function(){if("object"!=typeof arguments)throw new Error("Can't create a new `Gera.Buffer.RenderingInfo` object, because the input arguments object is not a type of `object`.");if(0===arguments.length)throw new Error("Can't create a new `Gera.Buffer.RenderingInfo` object, because the input arguments count equals zero.");t.call(this,arguments[0])};var t=function(e){if(0===Object.keys(e).length)throw new Error("Can't create a new `Gera.Buffer.RenderingInfo` object, because the properties length of the input object equals zero. It can't be, because the `Gera.Buffer.RenderingInfo` object requires to have two properties at least [ size, count ].");for(var t in e)switch(t){case"size":r.call(this,e[t]);break;case"count":n.call(this,e[t]);break;default:throw new Error("Can't create a new `Gera.Buffer.RenderingInfo` object, because one of the provided properties is NOT valid. For the `Gera.Buffer.RenderingInfo` object, it's required to use only the following properties: [ size, count ].")}},r=function(e){if("number"!=typeof e)throw new Error("Can't create a new `Gera.Buffer.RenderingInfo` object, because the input size value is NOT a type of `number`.");this.size=e},n=function(e){if("number"!=typeof e)throw new Error("Can't create a new `Gera.Buffer.RenderingInfo` object, because the input count is NOT a type of `number`.");this.count=e}}(r),function(e){e.Object3d=function(){var e=t(arguments[0]);for(var r in e)this[r]=e[r]};var t=function(t){if("object"!=typeof t)throw new Error("Can't handle the input arguments for creating a new `Gera.Object3d` instance, because the input arguments object is NOT a type of `object`.");var n=["vertices","indices","uvCoordinates","uvIndices","textures"],o=e.Global.checkElementsExistenceInArray;if(!o(Object.keys(t),n))throw new Error("Can't handle the input arguments for creating a new `Gera.Object3d` instance, because the input arguments object doesn't content the required properties: [ vertices, indices, uvCoordinates, uvIndices, textures ].");var a={vertices:t.vertices,indices:t.indices,uvCoordinates:t.uvCoordinates,uvIndices:t.uvIndices,textures:t.textures};return r(a),a},r=function(t){if("object"!=typeof t)throw new Error("Can't check the values of the given properties object, because it's NOT a type of `object`.");if(!(t.vertices instanceof Array))throw new Error("Can't allow to create a new `Gera.Object3d` instance, because the property `vertices` is NOT an instance of `Array`.");if(0===t.vertices.length)throw new Error("Can't allow to create a new `Gera.Object3d` instance, because the property `vertices` is NOT an instance of `Array`.");if(t.indices&&!(t.indices instanceof Array))throw new Error("Can't allow to create a new `Gera.Object3d` instance, because the optional property `indices` is NOT an instance of `Array`.");if(t.uvCoordinates&&!(t.uvCoordinates instanceof Array))throw new Error("Can't allow to create a new `Gera.Object3d` instance, because the optional property `uvCoordinates` is NOT an instance of `Array`.");if(t.uvIndices&&!(t.uvIndices instanceof Array))throw new Error("Can't allow to create a new `Gera.Object3d` instance, because the optional property `uvIndices` is NOT an instance of `Array`.");if(t.textures instanceof Array)for(var r in t.textures)if(!(r instanceof e.Texture))throw new Error("Can't allow to create a new `Gera.Object3d` instance, because one of the binded textures is NOT an instance of `Gera.Texture`.")}}(r),function(e){e.Mesh=function(){var e=t(arguments[0]);r.call(this,e)},e.Mesh.prototype.setPositon=function(t){if(!(t instanceof e.Vector3))throw new Error("Can't set a new position vector for mesh object, because the input position vector object is NOT an instance of `Gera.Vector3`.");this.position=t},e.Mesh.prototype.rotate=function(t,r){if(!(t instanceof e.Vector3))throw new Error(String.prototype.concat("Can't rotate the mesh object with GUID: `",this.guid.sequence,"`, because the given rotation vector is NOT an instance of `Gera.Vector3`."));if("number"!=typeof r)throw new Error(String.prototype.concat("Can't rotate the mesh object with GUID: `",this.guid.sequence,"`, because the given angle for rotation is NOT a type of `number`."));var n=e.Math.convertRotationToQuaternion(t,r);this.quaternion.multiplyByQuaternion(n)},e.Mesh.prototype.setQuaternion=function(t){if(!(newRotation instanceof e.Quaternion))throw new Error("Can't set a new quaternion object for mesh object, because the input quaternion object is NOT an instance of `Gera.Quaternion`.");this.quaternion=t},e.Mesh.Wireframe=function(e){var t=!1;this.get=function(){return t},this.set=function(e){if("boolean"!=typeof e)throw new Error("Can't set the wireframe mode for the mesh, because the given wireframe mode value is NOT a type of `boolean`.");t=e},e&&this.set(e)},e.Mesh.Transparency=function(e){var t=1;this.get=function(){return t},this.set=function(e){if("number"!=typeof e)throw new Error("Can't set the transparency of the mesh, because the given value is NOT a type of `number`.");t=e},e&&this.set(e)},e.Mesh.GlBuffer={},e.Mesh.GlBuffer.Type={Geometry:0,Color:1,Texture:2,Normals:3},e.Mesh.GlBuffer.Options=function(){this.vertices=null,this.indices=null},e.Mesh.GlBuffers=function(){if("object"!=typeof arguments)throw new Error("Can't create a new `Gera.Mesh.GlBuffers` object, because the input arguments object is not a type of `object`.");if(0===arguments.length)throw new Error("Can't create a new `Gera.Mesh.GlBuffers` object, because the input arguments count equals zero.");var t=["geometry","color","texture","normals"];for(var r in t)this[t[r]]=new e.Mesh.GlBuffer.Options;n.call(this,arguments[0])};var t=function(t){if("object"!=typeof t)throw new Error("Can't handle the input arguments object for creating a new `Gera.Mesh` object, because it's NOT a type of `object`.");var r=e.Global.checkElementsExistenceInArray;if(!r(Object.keys(t),["geometry","material"]))throw new Error("Can't create a new `Gera.Mesh` object, because the input arguments object doesn't have the required properties: [ geometry, material ].");var n={geometry:t.geometry,material:t.material,drawMode:t.drawMode};if(!(n.geometry instanceof e.Geometry))throw new Error("Can't create a new `Gera.Mesh` object, because the given geometry object is NOT an instance of `Gera.Geometry`.");if(!(n.material instanceof e.Material))throw new Error("Can't create a new `Gera.Mesh` object, because the given material object is NOT an instance of `Gera.Material`.");if("number"==typeof n.drawMode){var o=Object.keys(e.Renderer.DrawMode).map(function(t){return e.Renderer.DrawMode[t]});if(-1===o.indexOf(n.drawMode))throw new Error("Can't create a new `Gera.Mesh` object, because, the given drawing mode type value is NOT associated with any one type, existed in the `Gera.Renderer.DrawMode` enumeration.")}else n.drawMode=null;return n},r=function(t){if("object"!=typeof t)throw new Error("Can't create a new `Gera.Mesh` object, because the handled settings object is NOT a type of `object`.");this.guid=null,this.glBuffers=null,this.geometry=t.geometry,this.material=t.material,this.ambientColor=new e.Color({type:e.Color.Type.RgbaObject,value:{red:255,green:255,blue:255,alpha:255}}),this.customDrawMode=t.drawMode,this.wireframe=new e.Mesh.Wireframe,this.position=new e.Vector3,this.quaternion=e.Math.convertRotationToQuaternion(this.position,0),this.rotation=null,this.transparency=new e.Mesh.Transparency,this.initialized=!1},n=function(t){if(0===Object.keys(t).length)throw new Error("Can't prepare the WebGL buffers for mesh, because the properties length of the input buffers object equals zero. It can't be, because the mesh object requires to have one WebGL buffer at least ( vertices ).");for(var r in t){if(null!==t[r]&&"object"!=typeof t[r])throw new Error("Can't prepare the WebGL buffers for mesh, because one of them is NOT a type of `object`.");switch(r){case"geometry":o.call(this,e.Mesh.GlBuffer.Type.Geometry,t[r].vertices,t[r].indices);break;case"color":o.call(this,e.Mesh.GlBuffer.Type.Color,t[r].vertices,t[r].indices);break;case"texture":o.call(this,e.Mesh.GlBuffer.Type.Texture,t[r].vertices,t[r].indices);break;case"normals":o.call(this,e.Mesh.GlBuffer.Type.Normals,t[r].vertices,t[r].indices);break;default:throw new Error("Can't prepare the WebGL buffers for mesh, because the input buffers object contains the incorrect properties. The valid properties are the next: [ geometry, color, texture ].")}}},o=function(t,r,n){if("number"!=typeof t)throw new Error("Can't bind the buffer data, because the input buffer type is NOT a type of `number`.");if(r&&!(r instanceof WebGLBuffer))throw new Error("Can't bind the WebGL buffer with vertices, because it's NOT an instance of `WebGLBuffer`.");if(n&&!(n instanceof WebGLBuffer))throw new Error("Can't bind the WebGL buffer with indices, because it's NOT an instance of `WebGLBuffer`.");switch(t){case e.Mesh.GlBuffer.Type.Geometry:this.geometry.vertices=r,this.geometry.indices=n;break;case e.Mesh.GlBuffer.Type.Color:this.color.vertices=r,this.color.indices=n;break;case e.Mesh.GlBuffer.Type.Texture:this.texture.vertices=r,this.texture.indices=n;break;case e.Mesh.GlBuffer.Type.Normals:this.normals.vertices=r,this.normals.indices=n;break;default:throw new Error("Can't bind the buffer data, because the input buffer type is NOT associated with any one type, existed in the `Gera.Mesh.GlBuffer.Type` enumeration.")}}}(r),function(e){e.Dom=function(){},e.Dom.prototype.createNewCanvasElement=function(e,t){var r=document.createElement("canvas");return r.id="string"!=typeof e||0===e.length?this.prepareNewUniqueDomId():e,"boolean"==typeof t&&t===!0&&document.body.appendChild(r),r},e.Dom.prototype.prepareNewUniqueDomId=function(){var t=new e.Guid;return this.checkExistedDomId(t.sequence)?this.prepareNewUniqueDomId():t.sequence},e.Dom.prototype.checkExistingObjectByDomId=function(e){if("string"!=typeof e)throw new Error("Can't check DOM object existence, because the provided id is NOT a type of `string`.");var t=document.getElementById(e);return t?!0:!1},e.Dom.prototype.getExistingObjectByDomId=function(e){if("string"!=typeof e)throw new Error("Can't check DOM object existence, because the provided id is NOT a type of `string`.");var t=document.getElementById(e);if(!t)throw new Error(String.prototype.concat("Can't get the element from DOM by the given id: ",e));return t}}(r),function(e){e.Camera=function(){this.guid=null,this.projectionMatrix=new e.Matrix.Empty,this.position=new e.Vector3,this.quaternion=e.Math.convertRotationToQuaternion(this.position,0),this.type=void 0,this.bounds=void 0},e.Camera.Type={Perspective:0,Orthographic:1},e.Camera.prototype.setProjection=function(n){if(!n)throw new Error("You didn't provide any arguments for setting a new camera projection view.");if(n instanceof e.Bounds.Perspective)t.call(this,n);else{if(!(n instanceof e.Bounds.Orthographic))throw new Error("You didn't provide the correct type of settings. Its object must be an instance of `Gera.Bounds.Perspective` or `Gera.Bounds.Orthographic`.");r.call(this,n)}},e.Camera.prototype.rotate=function(t,r){if(!(t instanceof e.Vector3))throw new Error(String.prototype.concat("Can't rotate the camera object with GUID: `",this.guid.sequence,"`, because the given rotation vector is NOT an instance of `Gera.Vector3`."));if("number"!=typeof r)throw new Error(String.prototype.concat("Can't rotate the camera object with GUID: `",this.guid.sequence,"`, because the given angle for rotation is NOT a type of `number`."));var n=e.Math.convertRotationToQuaternion(t,r);this.quaternion.multiplyByQuaternion(n)};var t=function(t){if(!(t instanceof e.Bounds.Perspective))throw new Error("The given settings argument for perspective camera view is not an instance of `Gera.Bounds.Perspective`.");this.type=e.Camera.Type.Perspective,this.bounds=t,this.projectionMatrix=e.Math.createPerspectiveProjection(this.bounds)},r=function(t){if(!(t instanceof e.Bounds.Orthographic))throw new Error("The given settings argument for orthographic camera view is not an instance of `Gera.Bounds.Orthographic`.");this.type=e.Camera.Type.Orthographic,this.bounds=t,this.projectionMatrix=math.createOrthographicProjection(this.bounds)}}(r),function(e){e.Scene=function(){this.guid=new e.Guid,this.modelViewMatrix=new e.Matrix.Empty,this.children=[],this.timer=new e.Scene.Timer,this.activeCamera=null},e.Scene.prototype.add=function(r){if(!(this.children instanceof Array))throw new Error("Can't add any item to the children collection, because it's NOT an instance of `Array`.");if(!t(r))throw new Error("Can't add the item to the class collection, because its instance is different from the of them: [ Gera.Camera, Gera.Mesh, Gera.Light ].");for(r.guid=new e.Guid;this.getByGuid(r.guid)instanceof e.Guid===void 0;)r.guid=new e.Guid;this.children.push(r)},e.Scene.prototype.getIlluminationObjects=function(){for(var t=new Array,r=0;r<this.children.length;r++){var n=this.children[r];n instanceof e.Light&&t.push(n)}return 0===t.length?null:t},e.Scene.prototype.getByGuid=function(t){if(!(t instanceof e.Guid))throw new Error("Can't get the children from scene object by GUID, because the provided guid object is NOT an instance of `Gera.Guid`.");for(var r=0;r<this.children.length;r++)if(this.children[r].guid===t)return this.children[r]},e.Scene.prototype.remove=function(e){if(!(this.children instanceof Array))throw new Error("Can't remove any item from the children collection, because it's NOT an instance of `Array`.");var t=this.children.indexOf(e);if(-1===t)throw new Error("You're trying to remove an object from scene, which doesn't exist in it.");if(!(t>-1))throw new Error("Some unhandled exception has occurred while removing the object from scene.");this.children.splice(t,1)},e.Scene.prototype.removeByGuid=function(t){if(!(t instanceof e.Guid))throw new Error("Can't remove any item from the children collection, because the provided GUID object is NOT an instance of `Gera.Guid`.");if(!(this.children instanceof Array))throw new Error("Can't remove any item from the children collection, because it's NOT an instance of `Array`.");for(var r in this.children)if(this.children[r].guid===t)return void this.children.splice(r,1);throw new Error(String.prototype.concat("There is NO element in scene, with the following GUID-sequence: `",t.sequence,"`."))},e.Scene.prototype.setActiveCamera=function(t){if(!(t instanceof e.Camera))throw new Error("Can't set the input camera object as the active one, because it's NOT an instance of `Gera.Camera`.");if(!(this.children instanceof Array))throw new Error("Can't set the input camera object as the active one, because the `children` property is NOT an instance of `Array`.");this.children.length>0?e.Global.checkElementExistenceInArray(this.children,t)||this.add(t):this.add(t),this.activeCamera=t},e.Scene.prototype.getTimer=function(){if(!(this.timer instanceof e.Scene.Timer))throw new Error("Can't return the scene timer, because the binded timer object is NOT an instance of `Gera.Scene.Timer`.");return this.timer},e.Scene.prototype.checkIsItemAllowedToAdd=function(e){return t(e)},e.Scene.Timer=function(){var e=["now","last","elapsed"];for(var t in e)this[t]=e[t]},e.Scene.Timer.prototype.updateCurrentTime=function(){if("function"!=typeof Date)throw new Error("Can't update the current timer from the scene object, because your browser doesn't support `Date` object or it was overridden.");this.now=(new Date).getTime(),"number"==typeof this.last&&0!==this.last&&(this.elapsed=this.now-this.last),this.last=this.now};var t=function(e){var t=r();if(!(t instanceof Array))throw new Error("Can't check if scene is able to add the given item, because the fetched private collection with allowed child types is NOT an instance of `Array`.");for(var n=0;n<t.length;n++)if(e instanceof t[n])return!0;return!1},r=function(){return[e.Camera,e.Mesh,e.Light]}}(r),function(e){e.Renderer=function(){this.canvas=void 0,this.webglContext=void 0,this.scene=void 0},e.Renderer.DrawMode={Points:0,Lines:1,LineStrip:2,LineLoop:3,Triangles:4,TriangleStrip:5,TriangleFan:6},e.Renderer.Settings=function(e){if(!e)throw new Error("Input properties can't be undefined for the new renderer settings.");for(var t in e){if("boolean"!=typeof e[t])throw new Error("Input arguments for renderer settings can only be a type of `boolean`.");-1!==Z().indexOf(t)&&(this[t]=e[t])}if(0===Object.keys(this).length)throw new Error("Renderer settings must contain at least one property.")},e.Renderer.prototype.printVersionInfo=function(){if("string"!=typeof e.version)throw new Error("The property, which defines the version of the current renderer object is `undefined`.");console.log(String.prototype.concat("Gera WebGL Renderer ( version ",e.version," )"))},e.Renderer.prototype.setActiveCanvasElement=function(t){if(!t)throw new Error("Can't set the active canvas element, because the input object is `undefined`. You must provide either the `string` value ( the DOM element id ) or the `HTMLCanvasElement` object.");
var r=new e.Dom;if("string"==typeof t)r.checkExistingObjectByDomId(t)||(t=r.prepareNewUniqueDomId()),this.canvas=r.getExistingObjectByDomId(t);else{if(!(t instanceof HTMLCanvasElement))throw new Error("Can't set the active canvas element, because the input object is NOT a type of `string` or an instance of `HTMLCanvasElement`.");this.canvas=t}},e.Renderer.prototype.createWebGLContext=function(t,r){if(!(t instanceof HTMLCanvasElement))throw new Error("Canvas element in document object is NOT an instance of `HTMLCanvasElement`.");if(!(r instanceof e.Renderer.Settings))throw new Error("Input renderer settings object is NOT an instance of `Gera.Renderer.Settings`.");var n=K();for(var a in n){var i=t.getContext(n[a],r);if(i instanceof WebGLRenderingContext){var s=new o(i);return i.shaderProgram=s.createShaderProgram(),i}}throw new Error("Can't create a new WebGL context on based arguments.")},e.Renderer.prototype.setCurrentWebGLContext=function(e){if(!(e instanceof WebGLRenderingContext))throw new Error("Can't set the input context as the current one, because it's not an instance of `WebGLRenderingContext`.");this.webglContext=e},e.Renderer.prototype.getCurrentWebGLContext=function(){return this.webglContext},e.Renderer.prototype.setCurrentScene=function(t){if(!(t instanceof e.Scene))throw new Error("Can't set the input scene as the current one, because it's not an instance of `Gera.Scene`.");this.scene=t},e.Renderer.prototype.clearCurrentScene=function(){if(!this.scene)throw new Error("Can't clear the current scene, because it doesn't exist.");if(!(this.scene instanceof e.Scene))throw new Error("Can't clear the current scene object, because it isn't an instance of `Gera.Scene`.");this.scene=new e.Scene},e.Renderer.prototype.getCurrentScene=function(){return this.scene},e.Renderer.prototype.renderScene=function(){this.requestFrameId=window.requestAnimationFrame(this.renderScene.bind(this)),t.call(this),n.call(this),r.call(this)},e.Renderer.prototype.setCurrentFrameBufferColor=function(t){if(!(t instanceof e.Color.GlFloat))throw new Error("Can't set the current frame buffer color, because the input value is NOT an instance of `Gera.Color.GlFloat`.");this.webglContext.frameBufferColor=t},e.Renderer.prototype.checkIsMeshTexturePowerOf2=function(t){if(!(t instanceof Image))throw new Error("Can't check the mesh texture width/height for being a power of 2, because the given image object is NOT an instance of `Image`.");return e.Math.checkIsIntegerPowerOf2(t.width)?!1:e.Math.checkIsIntegerPowerOf2(t.height)?!1:!0};var t=function(){if(this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,!(this.scene instanceof e.Scene))throw new Error("Can't resize the current WebGL container, because the scene object, which is linked to the renderer object is NOT an instance of `Gera.Scene`.");if(!(this.scene.activeCamera instanceof e.Camera))throw new Error("Can't resize the current WebGL container, because the active scene camera is NOT an instance of `Gera.Camera`.");this.scene.activeCamera.bounds.aspect=this.canvas.width/this.canvas.height},r=function(){if(!this.scene.timer instanceof e.Scene.Timer)throw new Error("Can't continue to animate the current scene, because the private scene animator object is NOT an instance of `Gera.Scene.Timer`.");this.scene.timer.updateCurrentTime();for(var t=0;t<this.scene.children.length;t++){var r=this.scene.children[t];r instanceof e.Mesh&&r.rotation instanceof e.Rotation&&r.rotate(r.rotation.vector,r.rotation.angle)}},n=function(){if(this.webglContext||J(this,"Can't draw a scene, because the current WebGL context is undefined."),this.webglContext instanceof WebGLRenderingContext||J(this,"Can't draw a scene, because the current WebGL context is not an instanceof of `WebGLRenderingContext`."),this.scene instanceof e.Scene||J(this,"Can't handle any scene object, because the current active scene in renderer object is NOT an instance of `Gera.Scene`."),this.webglContext.viewport(0,0,this.webglContext.drawingBufferWidth,this.webglContext.drawingBufferHeight),this.webglContext.clear(this.webglContext.COLOR_BUFFER_BIT|this.webglContext.DEPTH_BUFFER_BIT|this.webglContext.STENCIL_BUFFER_BIT),a.call(this),!(this.webglContext.shaderProgram instanceof WebGLProgram))throw new Error("Can't draw a scene, because the shader WebGL program is NOT initialized correctly. It's NOT an instance of `WebGLProgram`.");this.webglContext.useProgram(this.webglContext.shaderProgram),i.call(this)},a=function(){this.webglContext.frameBufferColor instanceof e.Color.GlFloat||J(this,"Can't clear the current frame buffer color, because the `frameBufferColor` property of the renderer object is NOT an instance of `Gera.Color.GlFloat`."),this.webglContext.clearColor(this.webglContext.frameBufferColor.red,this.webglContext.frameBufferColor.green,this.webglContext.frameBufferColor.blue,this.webglContext.frameBufferColor.alpha)},i=function(){if(this.scene.children instanceof Array||J(this,"Can	 handle any scene objects, because scene's children collection is NOT an instance of `Array`."),!(this.scene.activeCamera instanceof e.Camera))throw new Error("Can't handle the current scene objects, because the active camera is NOT an instance of `Gera.Camera`.");s.call(this);for(var t=0;t<this.scene.children.length;t++){var r=this.scene.children[t];r instanceof e.Mesh&&(c.call(this,r),I.call(this,r)),this.scene.checkIsItemAllowedToAdd(r)||J(this,"Can't render the current scene, because it has a child, which is NOT one of the valid instances. The scene object must only hold the elements, which are the instances of: [ Gera.Camera, Gera.Mesh, Gera.Light ].")}},s=function(){var t=this.scene.activeCamera;t.projectionMatrix instanceof Float32Array||J(this,"Can't handle current camera view, because the camera's projection matrix is NOT an instance of `Float32Array`."),t.type===e.Camera.Type.Perspective?t.projectionMatrix=e.Math.createPerspectiveProjection(t.bounds):t.type===e.Camera.Type.Orthographic?t.projectionMatrix=e.Math.createOrthographicProjection(t.bounds):J(this,"Can't handle the camera view, because the type of camera is invalid. Valid camera types are: [ Gera.Camera.Type.Perspective, Gera.Camera.Type.Orthographic ]."),t.projectionMatrix.translateByVector(t.position),t.projectionMatrix.multiplyByMatrix(t.quaternion.toMatrix()),this.webglContext.uniformMatrix4fv(this.webglContext.shaderProgram.uniforms.projectionMatrix,!1,t.projectionMatrix)},c=function(t){t instanceof e.Mesh||J(this,"Can't handle the input mesh object, because it's NOT an instance of `Gera.Mesh`."),this.scene.modelViewMatrix instanceof Float32Array||J(this,"Can't handle current camera view, because the input Model-View matrix is NOT an instance of `Float32Array`."),t.initialized||k.call(this,t),h.call(this,t),g.call(this,t),u.call(this,t),N.call(this,t),V.call(this,t),this.webglContext.uniformMatrix4fv(this.webglContext.shaderProgram.uniforms.modelViewMatrix,!1,this.scene.modelViewMatrix)},h=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't set the position/rotation of mesh in scene, because the given mesh object is NOT an instance of `Gera.Mesh`.");this.scene.modelViewMatrix=new e.Matrix.Identity,e.Math.translateMatrixByVector(this.scene.modelViewMatrix,t.position),this.scene.modelViewMatrix.multiplyByMatrix(t.quaternion.toMatrix())},u=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't handle the mesh textures, because the given mesh object is NOT an instance of `Gera.Mesh`.");for(var r=0;r<t.material.textures.length;r++){var n=t.material.textures[r];switch(n.type){case e.Texture.Type.Color:f.call(this,t);break;case e.Texture.Type.Image:l.call(this,t,n);break;case e.Texture.Type.Video:b.call(this,t,n);break;default:throw new Error("Can't continue to render the current scene, because the given mesh doesn't have any texture in its material group. Any mesh must have one texture of any type at least.")}}},f=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't handle the plain color texture, because the given mesh object is NOT an instance of `Gera.Mesh`.");p.call(this),m.call(this,t)},l=function(t,r){if(!(t instanceof e.Mesh))throw new Error("Can't handle the image texture, because the given mesh object is NOT an instance of `Gera.Mesh`.");if(!(r instanceof e.Texture))throw new Error("Can't handle the image texture, because the texture object is NOT an instance of `Gera.Texture`.");w.call(this),d.call(this,t),r.initialized||v.call(this,r)},b=function(t,r){if(!(t instanceof e.Mesh))throw new Error("Can't handle the video texture, because the given mesh object is NOT an instance of `Gera.Mesh`.");if(!(r instanceof e.Texture))throw new Error("Can't handle the video texture, because the texture object is NOT an instance of `Gera.Texture`.");w.call(this),d.call(this,t),r.initialized?T.call(this,r):x.call(this,r)},p=function(){this.webglContext.disableVertexAttribArray(2),this.webglContext.enableVertexAttribArray(1),this.webglContext.uniform1i(this.webglContext.shaderProgram.uniforms.hasMeshTexture,0)},w=function(){this.webglContext.disableVertexAttribArray(1),this.webglContext.enableVertexAttribArray(2),this.webglContext.uniform1i(this.webglContext.shaderProgram.uniforms.hasMeshTexture,1)},g=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't set buffers for the vertices of mesh, because the given mesh object is NOT an instance of `Gera.Mesh`.");this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,t.glBuffers.geometry.vertices),this.webglContext.vertexAttribPointer(this.webglContext.shaderProgram.attributes.vertexPosition,t.glBuffers.geometry.vertices.info.size,this.webglContext.FLOAT,!1,0,0),t.glBuffers.geometry.indices instanceof WebGLBuffer&&this.webglContext.bindBuffer(this.webglContext.ELEMENT_ARRAY_BUFFER,t.glBuffers.geometry.indices)},m=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't set buffers for the color vertices of mesh, because the given mesh object is NOT an instance of `Gera.Mesh`.");this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,t.glBuffers.color.vertices),this.webglContext.vertexAttribPointer(this.webglContext.shaderProgram.attributes.vertexColor,t.glBuffers.color.vertices.info.size,this.webglContext.FLOAT,!1,0,0),t.glBuffers.color.indices instanceof WebGLBuffer&&this.webglContext.bindBuffer(this.webglContext.ELEMENT_ARRAY_BUFFER,t.glBuffers.color.indices)},d=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't set buffers for the texture vertices of mesh, because the given mesh object is NOT an instance of `Gera.Mesh`.");this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,t.glBuffers.texture.vertices),this.webglContext.vertexAttribPointer(this.webglContext.shaderProgram.attributes.vertexTexture,t.glBuffers.texture.vertices.info.size,this.webglContext.FLOAT,!1,0,0),t.glBuffers.texture.indices instanceof WebGLBuffer&&this.webglContext.bindBuffer(this.webglContext.ELEMENT_ARRAY_BUFFER,t.glBuffers.texture.indices)},y=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't set buffers for the normals of mesh, because the given mesh object is NOT an insta of `Gera.Mesh`.");this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,t.glBuffers.normals.vertices),this.webglContext.vertexAttribPointer(this.webglContext.shaderProgram.attributes.vertexNormal,t.glBuffers.normals.vertices.info.size,this.webglContext.FLOAT,!1,0,0),t.glBuffers.texture.indices instanceof WebGLBuffer&&this.webglContext.bindBuffer(this.webglContext.ELEMENT_ARRAY_BUFFER,t.glBuffers.normals.indices)},v=function(t){if(!(t instanceof e.Texture))throw new Error("Can't handle the uninitialized texture image, because the subproperty `texture` of property `material` from the given mesh object is NOT an instance of `Gera.Texture`.");if(!(t.image instanceof Image))throw new Error("Can't handle the uninitialized texture image, because the subproperty `image` of subproperty `texture` from the given mesh object is NOT an instance of `Image`.");if("boolean"!=typeof t.image.initialized)throw new Error("Can't handle the uninitialized texture image, because the subproperty `initialized` of subproperty `texture` from the given mesh object is NOT a type of `boolean`.");t.image.initialized&&t.image.complete&&(C.call(this,t),this.checkIsMeshTexturePowerOf2.call(this,t.image)?G.call(this):j.call(this),O.call(this,t))},x=function(t){if(!(t instanceof e.Texture))throw new Error("Can't initialize the video texture, because the given texture object is NOT an instance of `Gera.Texture`.");if(!(t.video instanceof HTMLVideoElement))throw new Error("Can't initialize the video texture, because the `video` property of the texture object is NOT an instance of `HTMLVideoElement`.");if("boolean"!=typeof t.video.initialized)throw new Error("Can't initialize the video texture, because the `initialized` property of the texture object is NOT a type of `boolean`.");t.video.readyState===e.Ajax.ReadyState.Done&&(C.call(this,t),G.call(this),O.call(this,t),t.video.play())},T=function(t){if(!(t instanceof e.Texture))throw new Error("Can't update the image of the texture object, because it's NOT an instance of `Gera.Texture`.");this.webglContext.bindTexture(this.webglContext.TEXTURE_2D,t.glTexture),this.webglContext.pixelStorei(this.webglContext.UNPACK_FLIP_Y_WEBGL,!0),E.call(this,t),this.webglContext.texParameteri(this.webglContext.TEXTURE_2D,this.webglContext.TEXTURE_MAG_FILTER,this.webglContext.LINEAR),this.webglContext.texParameteri(this.webglContext.TEXTURE_2D,this.webglContext.TEXTURE_MIN_FILTER,this.webglContext.LINEAR_MIPMAP_NEAREST),this.webglContext.generateMipmap(this.webglContext.TEXTURE_2D),this.webglContext.bindTexture(this.webglContext.TEXTURE_2D,null),this.webglContext.activeTexture(this.webglContext.TEXTURE0),this.webglContext.bindTexture(this.webglContext.TEXTURE_2D,t.glTexture)},C=function(t){if(!(t instanceof e.Texture))throw new Error("Can't create the WebGL-texture object for mesh, because the input object is NOT an instance of `Gera.Texture`.");t.glTexture=this.webglContext.createTexture(),this.webglContext.bindTexture(this.webglContext.TEXTURE_2D,t.glTexture),this.webglContext.pixelStorei(this.webglContext.UNPACK_FLIP_Y_WEBGL,!0),E.call(this,t)},E=function(t){if(!(t instanceof e.Texture))throw new Error("Can't load the supplied pixel data into a texture, because the given texture object is NOT an instance of `Gera.Texture`.");var r=null;switch(t.type){case e.Texture.Type.Image:r=t.image;break;case e.Texture.Type.Video:r=t.video;break;default:throw new Error("Can't load the supplied pixel data into the WebGL texture, because the given texture object has the invalid texture type. Possible type values for any texture object are the next: [ Gera.Texture.Type.Image, Gera.Texture.Type.Video ].")}this.webglContext.texImage2D(this.webglContext.TEXTURE_2D,0,this.webglContext.RGBA,this.webglContext.RGBA,this.webglContext.UNSIGNED_BYTE,r)},G=function(){this.webglContext.generateMipmap(this.webglContext.TEXTURE_2D),this.webglContext.texParameteri(this.webglContext.TEXTURE_2D,this.webglContext.TEXTURE_MIN_FILTER,this.webglContext.LINEAR_MIPMAP_LINEAR)},j=function(){this.webglContext.texParameteri(this.webglContext.TEXTURE_2D,this.webglContext.TEXTURE_WRAP_S,this.webglContext.CLAMP_TO_EDGE),this.webglContext.texParameteri(this.webglContext.TEXTURE_2D,this.webglContext.TEXTURE_WRAP_T,this.webglContext.CLAMP_TO_EDGE),this.webglContext.texParameteri(this.webglContext.TEXTURE_2D,this.webglContext.TEXTURE_MIN_FILTER,this.webglContext.LINEAR)},O=function(t){if(!(t instanceof e.Texture))throw new Error("Can't complete the texture initialization, because the given texture is NOT an instance of `Gera.Texture`.");this.webglContext.uniform1i(this.webglContext.shaderProgram.uniforms.textureSampler,0),this.webglContext.uniform1i(this.webglContext.shaderProgram.uniforms.hasMeshTexture,1),this.webglContext.activeTexture(this.webglContext.TEXTURE0),this.webglContext.bindTexture(this.webglContext.TEXTURE_2D,t.glTexture),t.initialized=!0},N=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't handle the mesh normals, because the given mesh object is NOT an instance of `Gera.Mesh`.");if(!(t.geometry.normals instanceof e.Matrix.Custom))throw new Error("Can't handle the mesh normals, because the binded `normals` property from the property `geometry` of the mesh object is NOT defined.");y.call(this,t);var r=this.scene.getIlluminationObjects();r&&r[0]instanceof e.Light?M.call(this,t,r[0]):R.call(this,!1)},M=function(t,r){if(!(t instanceof e.Mesh))throw new Error("Can't handle the illuminated material of the mesh, because the given mesh object is NOT an instance of `Gera.Mesh`.");if(!(r instanceof e.Light))throw new Error("Can't handle the illuminated material of the mesh, because the given light object is NOT an instance of `Gera.Light`.");R.call(this,!0),A.call(this),S.call(this,t),L.call(this,r.direction),P.call(this,r.color)},R=function(e){if("boolean"!=typeof e)throw new Error("Can't set the boolean uniform variable in shader, which defines if mesh is illuminated or not, because the given boolean argument `isIlluminated` is NOT a type of `boolean`.");var t=this.webglContext.shaderProgram.uniforms.lightingEnabled;if(!(t instanceof WebGLUniformLocation))throw new Error("Can't set the boolean uniform variable in shader, which defines if mesh is illuminated, because the fetched uniform location is NOT an instance of `WebGLUniformLocation`.");this.webglContext.uniform1i(t,e)},A=function(){if(!(this.scene.modelViewMatrix instanceof Float32Array))throw new Error("Can't set normal matrix uniform, because the binded Model-View matrix is NOT an instance of `Float32Array`.");var t=e.Math.inverseThreeDimensionalMatrixFromFour,r=e.Math.transposeThreeDimensionalMatrix,n=t(this.scene.modelViewMatrix),o=r(n),a=this.webglContext.shaderProgram.uniforms.normalMatrix;if(!(a instanceof WebGLUniformLocation))throw new Error("Can't set the matrix uniform variable in shader, which defines the values of the normal matrix, because the fetched uniform location is NOT an instance of `WebGLUniformLocation`.");this.webglContext.uniformMatrix3fv(a,!1,o)},S=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't handle the ambient color of mesh, because the given mesh object is NOT an instance of `Gera.Mesh`.");if(!(t.ambientColor instanceof e.Color))throw new Error("Can't handle the ambient color of mesh, because the `ambientColor` property of the mesh is NOT an instance of `Gera.Color`.");var r=this.webglContext.shaderProgram.uniforms.ambientColor;if(!(r instanceof WebGLUniformLocation))throw new Error("Can't set the three-dimensional vector uniform variable in shader, which defines the value of the mesh ambient color, because the fetched uniform location is NOT an instance of `WebGLUniformLocation`.");this.webglContext.uniform3f(r,t.ambientColor.glFloat.red,t.ambientColor.glFloat.green,t.ambientColor.glFloat.blue)},L=function(t){if(!(t instanceof e.Vector3))throw new Error("Can't set the three-dimensional vector uniform variable in shader, which defines the value of the lighting direction, because the given lighting direction object is NOT an instance of `Gera.Vector3`.");var r=e.Math.normalizeThreeDimensionalVector(t);if(!(r instanceof e.Vector3))throw new Error("Can't set the three-dimensional vector uniform variable in shader, which defines the value of the lighting direction, because the calculated normalized direction is NOT an instance of `Gera.Vector3`.");var n=e.Math.scaleThreeDimensionalVector(r,-1);if(!(n instanceof e.Vector3))throw new Error("Can't set the three-dimensional vector uniform variable in shader, which defines the value of the lighting direction, because the calculated scaled vector is NOT an instance of `Gera.Vector3`.");var o=this.webglContext.shaderProgram.uniforms.lightingDirection;if(!(o instanceof WebGLUniformLocation))throw new Error("Can't set the three-dimensional vector uniform variable in shader, which defines the value of the lighting direction, because the fetched uniform location is NOT an instance of `WebGLUniformLocation`.");this.webglContext.uniform3f(o,n.x,n.y,n.z)},P=function(t){if(!(t instanceof e.Color))throw new Error("Can't set the three-dimensional vector uniform variable in shader, which defines the value of directional light color, because the given color object is NOT an instance of `Gera.Color`.");var r=this.webglContext.shaderProgram.uniforms.directionalColor;if(!(r instanceof WebGLUniformLocation))throw new Error("Can't set the three-dimensional vector uniform variable in shader, which defines the value of directional light color, because the fetched uniform location is NOT an instance of `WebGLUniformLocation`.");this.webglContext.uniform3f(r,t.glFloat.red,t.glFloat.green,t.glFloat.blue)},V=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't handle the transparency of the mesh, because the given mesh object is NOT an instance of `Gera.Mesh`.");var r=t.transparency.get();if("number"!=typeof r)throw new Error("Can't handle the transparency of the mesh, because the binded transparency value is NOT a type of `number`.");if(0>r||r>1)throw new Error("Can't handle the transparency of the mesh, because the binded transparency value has the incorrect value. Transparency may have the value equal from 0 to 1.");this.webglContext.uniform1f(this.webglContext.shaderProgram.uniforms.alphaValue,r),1>r?(this.webglContext.enable(this.webglContext.BLEND),this.webglContext.blendFunc(this.webglContext.SRC_ALPHA,this.webglContext.ONE_MINUS_SRC_ALPHA),this.webglContext.disable(this.webglContext.DEPTH_TEST)):(this.webglContext.disable(this.webglContext.BLEND),this.webglContext.enable(this.webglContext.DEPTH_TEST))},I=function(e){e.customDrawMode||"number"==typeof e.customDrawMode?z.call(this,e):F.call(this,e)},F=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't draw the mesh object in standard mode, because the given mesh object is NOT an instance of `Gera.Mesh`.");var r=t.wireframe.get();if("boolean"!=typeof r)throw new Error("Can't draw the mesh object in standard mode, because the binded wireframe mode value is NOT a type of `boolean`.");switch(t.customDrawMode=null,t.geometry.type){case e.Geometry.Type.Sphere:this.webglContext.drawElements(r?this.webglContext.LINE_STRIP:this.webglContext.TRIANGLES,t.glBuffers.geometry.indices.info.count,this.webglContext.UNSIGNED_SHORT,0);break;case e.Geometry.Type.Custom:this.webglContext.drawElements(r?this.webglContext.LINES:this.webglContext.TRIANGLES,t.glBuffers.geometry.indices.info.count,this.webglContext.UNSIGNED_SHORT,0);break;default:this.webglContext.drawElements(r?this.webglContext.LINE_LOOP:this.webglContext.TRIANGLES,t.glBuffers.geometry.indices.info.count,this.webglContext.UNSIGNED_SHORT,0)}},z=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't draw the mesh object in custom mode, because the given mesh object is NOT an instance of `Gera.Mesh`.");var r=D.call(this,t.customDrawMode);if("number"!=typeof r)throw new Error("Can't draw the mesh object in custom mode, because the binded draw mode value is NOT a type of `number`.");switch(B(t,r),t.geometry.type){case e.Geometry.Type.Sphere:this.webglContext.drawElements(r,t.glBuffers.geometry.indices.info.count,this.webglContext.UNSIGNED_SHORT,0);break;case e.Geometry.Type.Custom:this.webglContext.drawElements(r,t.glBuffers.geometry.indices.info.count,this.webglContext.UNSIGNED_SHORT,0);break;default:this.webglContext.drawElements(r,t.glBuffers.geometry.indices.info.count,this.webglContext.UNSIGNED_SHORT,0)}},B=function(t,r){if(!(t instanceof e.Mesh))throw new Error("Can't update the wireframe property of the given mesh object in custom draw mode, because the given mesh object is NOT an instance of `Gera.Mesh`.");if("number"!=typeof r)throw new Error("Can't update the wireframe property of the given mesh object in custom draw mode, because the fetched draw mode value from mesh is NOT a type of `number`.");switch(r){case e.Renderer.DrawMode.Points:case e.Renderer.DrawMode.Lines:case e.Renderer.DrawMode.LineStrip:case e.Renderer.DrawMode.LineLoop:t.wireframe.set(!0);break;case e.Renderer.DrawMode.Triangles:case e.Renderer.DrawMode.TriangleStrip:case e.Renderer.DrawMode.TriangleFan:t.wireframe.set(!1);break;default:throw new Error("Can't update the wireframe property of the given mesh object in custom draw mode, because the binded draw mode value is NOT associated with any one type, existed in the `Gera.Renderer.DrawMode` enumeration.")}},D=function(t){if(!(this.webglContext instanceof WebGLRenderingContext))throw new Error("Can't return the native draw mode value from the WebGL-context, because the given WebGL-context object is NOT an instance of `WebGLRenderingContext`.");if("number"!=typeof t)throw new Error("Can't return the native draw mode value from the WebGL-context, because the given draw mode is NOT a type of `number`.");switch(t){case e.Renderer.DrawMode.Points:return this.webglContext.POINTS;case e.Renderer.DrawMode.Lines:return this.webglContext.LINES;case e.Renderer.DrawMode.LineStrip:return this.webglContext.LINE_STRIP;case e.Renderer.DrawMode.LineLoop:return this.webglContext.LINE_LOOP;case e.Renderer.DrawMode.Triangles:return this.webglContext.TRIANGLES;case e.Renderer.DrawMode.TriangleStrip:return this.webglContext.TRIANGLE_STRIP;case e.Renderer.DrawMode.TriangleFan:return this.webglContext.TRIANGLE_FAN;default:throw new Error("Can't return the native draw mode value from the WebGL-context, because the given draw mode is NOT associated with any value from the `Gera.Renderer.DrawMode` enumeration.")}},k=function(t){t instanceof e.Mesh||J(this,"Can't handle the input mesh object, because it's NOT an instance of `Gera.Mesh`.");var r=t.material.textures[0].type;switch(r){case e.Texture.Type.Color:q.call(this,t);break;case e.Texture.Type.Image:case e.Texture.Type.Video:U.call(this,t);break;default:throw new Error("Can't initialize the mesh object, because the texture type is not valid. ")}t.initialized=!0},q=function(t){t.glBuffers=new e.Mesh.GlBuffers({geometry:{vertices:_.call(this,t),indices:Y.call(this,t)},color:{vertices:W.call(this,t),indices:null},texture:{vertices:null,indices:null},normals:{vertices:Q.call(this,t),indices:null}})},U=function(t){t.glBuffers=new e.Mesh.GlBuffers({geometry:{vertices:_.call(this,t),indices:Y.call(this,t)},color:{vertices:null,indices:null},texture:{vertices:H.call(this,t),indices:X.call(this,t)},normals:{vertices:Q.call(this,t),indices:null}})},_=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't create a new vertex buffer for mesh, because the input mesh object is NOT an instance of `Gera.Mesh`.");if("function"!=typeof Float32Array)throw new Error("Can't create a new vertex buffer for mesh. Seems to be, that your browser doesn't support the typed arrays. Required `Float32Array` type is NOT supported in your browser.");var r=this.webglContext.createBuffer();this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,r),this.webglContext.bufferData(this.webglContext.ARRAY_BUFFER,t.geometry.vertices.typed,this.webglContext.DYNAMIC_DRAW);var n=Object.keys(new e.Vector3).length;return r.info=new e.Buffer.RenderingInfo({size:n,count:t.geometry.vertices.typed.length/n}),r},W=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't create a new color buffer for mesh, because the input mesh object is NOT an instance of `Gera.Mesh`.");if("function"!=typeof Float32Array)throw new Error("Can't create a new color buffer for mesh. Seems to be, that your browser doesn't support the typed arrays. Required `Float32Array` type is NOT supported in your browser.");var r=t.material.textures[0];if(!(r instanceof e.Texture))throw new Error("Can't create a new color buffer for mesh, because the binded texture object to the mesh is NOT an instance of `Gera.Texture`.");if(r.type===e.Texture.Type.Color){var n=this.webglContext.createBuffer();this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,n);for(var o=[],a=0;a<t.geometry.vertices.generic.length;a++)o.push(r.color.glFloat.red),o.push(r.color.glFloat.green),o.push(r.color.glFloat.blue),o.push(r.color.glFloat.alpha);this.webglContext.bufferData(this.webglContext.ARRAY_BUFFER,new Float32Array(o),this.webglContext.DYNAMIC_DRAW);var i=Object.keys(new e.Vector4).length;return n.info=new e.Buffer.RenderingInfo({size:i,count:o.length/i}),n}throw new Error("Can't create a new color buffer for mesh, because the type of the binded texture object is NOT the `Gera.Texture.Type.Color`.")},H=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't create a new texture buffer for mesh, because the input mesh object is NOT an instance of `Gera.Mesh`.");if("function"!=typeof Float32Array)throw new Error("Can't create a new texture buffer for mesh. Seems to be, that your browser doesn't support the typed arrays. Required `Float32Array` type is NOT supported in your browser.");var r=t.material.textures[0];if(!(r instanceof e.Texture))throw new Error("Can't create a new texture buffer for mesh, because the binded texture object to the mesh is NOT an instance of `Gera.Texture`.");if(e.Texture.checkIsMultimediaTexture(r)){var n=this.webglContext.createBuffer();this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,n),this.webglContext.bufferData(this.webglContext.ARRAY_BUFFER,t.geometry.uvCoordinates.typed,this.webglContext.DYNAMIC_DRAW);var o=Object.keys(new e.Vector2).length;return n.info=new e.Buffer.RenderingInfo({size:o,count:t.geometry.uvCoordinates.typed.length/o}),n}throw new Error("Can't create a new texture buffer for mesh, because the type of the binded texture object is NOT the `Gera.Texture.Type.Image`.")},Q=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't create a new normal buffer for mesh, because the input mesh object is NOT an instance of `Gera.Mesh`.");if("function"!=typeof Float32Array)throw new Error("Can't create a new normal buffer for mesh. Seems to be, that your browser doesn't support the typed arrays. Required `Float32Array` type is NOT supported in your browser.");var r=this.webglContext.createBuffer();this.webglContext.bindBuffer(this.webglContext.ARRAY_BUFFER,r),this.webglContext.bufferData(this.webglContext.ARRAY_BUFFER,t.geometry.normals.typed,this.webglContext.DYNAMIC_DRAW);var n=Object.keys(new e.Vector3).length;return r.info=new e.Buffer.RenderingInfo({size:n,count:t.geometry.normals.typed.length/n}),r},Y=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't create a new index buffer for mesh, because the input mesh object is NOT an instance of `Gera.Mesh`.");if("function"!=typeof Uint16Array)throw new Error("Can't create a new index buffer for mesh. Seems to be, that your browser doesn't support the typed arrays. Required `Uint16Array` type is NOT supported in your browser.");if(t.geometry.indices instanceof Array){var r=this.webglContext.createBuffer();return this.webglContext.bindBuffer(this.webglContext.ELEMENT_ARRAY_BUFFER,r),this.webglContext.bufferData(this.webglContext.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.geometry.indices),this.webglContext.DYNAMIC_DRAW),r.info=new e.Buffer.RenderingInfo({size:1,count:t.geometry.indices.length}),r}return null},X=function(t){if(!(t instanceof e.Mesh))throw new Error("Can't create a new texture index buffer for mesh, because the input mesh object is NOT an instance of `Gera.Mesh`.");if("function"!=typeof Uint16Array)throw new Error("Can't create a new texture index buffer for mesh. Seems to be, that your browser doesn't support the typed arrays. Required `Uint16Array` type is NOT supported in your browser.");if(t.geometry.uvIndices instanceof Array){var r=this.webglContext.createBuffer();return this.webglContext.bindBuffer(this.webglContext.ELEMENT_ARRAY_BUFFER,r),this.webglContext.bufferData(this.webglContext.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.geometry.uvIndices),this.webglContext.DYNAMIC_DRAW),r.info=new e.Buffer.RenderingInfo({size:1,count:t.geometry.uvIndices.length}),r}return null
},J=function(t,r){if(!(t instanceof e.Renderer))throw new Error("Can't terminate the current renderer work, because the input renderer object is NOT an instance of `Gera.Renderer`.");if("string"!=typeof r)throw new Error("Can't terminate the current renderer work, because the input exception message is NOT a type of `string`.");window.cancelAnimationFrame(t.requestFrameId),t.requestFrameId=void 0,t.webglContext instanceof WebGLRenderingContext&&t.webglContext.shaderProgram instanceof WebGLProgram&&t.webglContext.deleteProgram(t.webglContext.shaderProgram),t.webglContext=void 0},K=function(){return["webgl","experimental-webgl","webkit-3d","moz-webgl","3d","webgl2","experimental-webgl2"]},Z=function(){return["alpha","antialias","depth","stencil","premultipliedAlpha","preserveDrawingBuffer"]}}(r),function(e){e.Parser=function(){},e.Parser.Json=function(){},e.Parser.Json.prototype.parse=function(n){var o=null;if("string"==typeof n)o=JSON.parse(n);else{if("object"!=typeof n)throw new Error("Can't parse the given content into JSON 3D-model, because it's NOT a type of `string` or `object`.");o=n}return o.indices instanceof Array&&0!==o.indices.length||(o=null),new e.Object3d({vertices:t(o.vertices),indices:o.indices,uvCoordinates:r(o.textureCoordinates),uvIndices:null,textures:null})};var t=function(t){if(!(t instanceof Array))throw new Error("Can't serialize the input raw vertices list into generic one, because it's NOT an instance of `Array`.");for(var r=[],n=0;n<t.length;n+=3)r.push(new e.Vector3({x:t[n],y:t[n+1],z:t[n+2]}));return 0===r.length?null:r},r=function(t){var r=null;if(t instanceof Array){for(var r=[],n=0;n<t.length;n+=2)r.push(new e.Vector2({x:t[n],y:t[n+1]}));0===r.length&&(r=null)}return r}}(r)}(window,"Gera");